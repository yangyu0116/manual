<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=gb2312">
<link rel="stylesheet" href="Word2Chm.css" type="text/css">
<title> BluetoothSocket</title>
</head>
<body>     
<div class=WordSection25 style='layout-grid:15.6pt'><br clear=all
style='page-break-before:always'>

<p class=MsoNormal align=center style='text-align:center'><a
name=BluetoothSocket><b><span style='font-size:18.0pt'>BluetoothSocket</span></b></a></p>
<p class=MsoNormal align=center style='text-align:center'><span
>译者署名：</span> <span>Android Club SYSU</span></p>
<p class=MsoNormal align=center style='text-align:center'><span
>译者链接：</span><span><a target="_blank" href="http://www.android-wiki.net">http://www.android-wiki.net</a>&nbsp; </span></p>
<p class=MsoNormal align=center style='text-align:center'><span
>版本：</span><span>Android 2.3 r1</span></p>
<p class=MsoNormal align=left style='text-align:left'><span>&nbsp;</span></p>
<p class=MsoNormal align=left style='text-align:left'><b><span
style='font-size:12.0pt;'>结构</span></b></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>继承关系</span></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
text-indent:21.0pt'><b><i><span>public static class <span
style='color:#C00000'>Gallery.LayoutParams</span> extends <span
style='color:#C00000'>ViewGroup.LayoutParams</span></span></i></b></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left'><span
lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
text-indent:21.0pt'><span>java.lang.Object</span></p>
<p class=MsoNormal align=left style='margin-left:42.0pt;text-align:left;
text-indent:21.0pt'><span>android.view. ViewGroup.LayoutParams</span></p>
<p class=MsoNormal align=left style='margin-left:63.0pt;text-align:left;
text-indent:21.0pt'><span>android.widget.Gallery.LayoutParams</span></p>
<p class=MsoNormal align=left style='margin-left:42.0pt;text-align:left;
text-indent:21.0pt'><span>&nbsp;</span></p>
<p class=MsoNormal align=left style='text-align:left'><b><span
style='font-size:12.0pt;'>类概述</span></b></p>
<p class=MsoNormal align=left style='text-align:left'><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
>已连接或连接到蓝牙套接字</span><span>(socket)</span><span
>。</span></p>
<p class=MsoNormal align=left style='text-align:left'><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
>蓝牙端口监听接口和</span><span>TCP</span><span
>端口类似：</span><span>Socket</span><span
>和</span><span>ServerSocket</span><span
>类。在服务器端，使用</span><span>BluetoothServerSocket</span><span
>类来创建一个</span> <span >监听服务端口。当一个连接被</span><span
lang=EN-US>BluetoothServerSocket</span><span >所接受，它会返回一个新的</span><span
lang=EN-US>BluetoothSocket</span><span >来管理该连接。在客户</span>
<span >端，使用一个单独的</span><span>BluetoothSocket</span><span
>类去初始化一个外接连接和管理该连接。</span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>最通常使用的蓝牙端口是</span><span>RFCOMM</span><span
>，它是被</span><span>Android API</span><span
>支持的类型。</span><span>RFCOMM</span><span
>是一个面向连接，通过蓝牙模块进行的数据流传输方式，它也被称为串行端口规范（</span><span
lang=EN-US>Serial Port Profile</span><span >，</span><span
lang=EN-US>SPP</span><span >）。</span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>为了创建一个</span><span>BluetoothSocket</span><span
>去连接到一个已知设备，使用方法</span><span>
BluetoothDevice.createRfcommSocketToServiceRecord()</span><span
>。然后调用</span><span>connect()</span><span
>方法去尝试一个</span> <span >面向远程设备的连接。这个调用将被阻塞指导一个连接已经建立或者该链接失效。</span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>为了创建一个</span><span>BluetoothSocket</span><span
>作为服务端（或者</span><span>“</span><span
>主机</span><span>”</span><span
>），查看</span><span>BluetoothServerSocket</span><span
>文档。</span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>每当该端口连接成功，无论它初始化为客户端，或者被接受作为服务器端，通过</span><span
lang=EN-US>getInputStream()</span><span >和</span><span
lang=EN-US>getOutputStream()</span><span >来打开</span><span
lang=EN-US>IO</span><span >流，从而获得各自的</span><span
lang=EN-US>InputStream</span><span >和</span><span
lang=EN-US>OutputStream</span><span >对象</span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US>BluetoothSocket</span><span >类线程安全。特别的，</span><span
lang=EN-US>close()</span><span >方法总会马上放弃外界操作并关闭服务器端口。</span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>注意：需要</span><code><span style='font-size:
12.0pt'><a target="_blank" href="http://developer.android.com/reference/android/Manifest.permission.html#BLUETOOTH"><span
style='font-size:10.5pt;font-family:"Calibri","sans-serif"'>BLUETOOTH</span></a></span></code><span
>权限。</span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>参见</span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><code><span
lang=EN-US style='font-size:12.0pt'><a target="_blank" href="http://developer.android.com/reference/android/bluetooth/BluetoothServerSocket.html"><span
style='font-size:10.5pt;font-family:"Calibri","sans-serif"'>BluetoothServerSocket</span></a></span></code></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><code><span
lang=EN-US style='font-size:12.0pt'>&nbsp;&nbsp;&nbsp; <a target="_blank" href="http://developer.android.com/reference/java/io/InputStream.html"><span
style='font-size:10.5pt;font-family:"Calibri","sans-serif"'>InputStream</span></a></span></code></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><code><span
lang=EN-US style='font-size:12.0pt'>&nbsp;&nbsp;&nbsp; <a target="_blank" href="http://developer.android.com/reference/java/io/OutputStream.html"><span
style='font-size:10.5pt;font-family:"Calibri","sans-serif"'>OutputStream</span></a></span></code></p>
<p class=MsoNormal align=left style='text-align:left'><code><span
style='font-size:12.0pt'>&nbsp;</span></code></p>
<p class=MsoNormal align=left style='text-align:left'><b><span
style='font-size:12.0pt;'>公共方法</span></b></p>
<p class=MsoNormal align=left style='text-align:left'><span
style='font-size:12.0pt;'>&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='background:#D9D9D9'>public void <b>close</b> () </span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>马上关闭该端口并且释放所有相关的资源。</span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>在其它线程的该端口中引起阻塞，从而使系统马上抛出一个<span>IO</span>异常。</span></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
text-indent:21.0pt'><span >异常</span></p>
<p class=MsoNormal align=left style='margin-left:42.0pt;text-align:left;
text-indent:21.0pt'><span >IOException</span></p>
<p class=MsoNormal align=left style='text-align:left'><span
>&nbsp;</span></p>
<p class=MsoNormal align=left style='text-align:left'><span
>&nbsp;&nbsp;&nbsp; </span><span
style='background:#D9D9D9'>public void <b>connect</b> ()</span><span
lang=EN-US> </span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>尝试连接到远程设备。</span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>该方法将阻塞，指导一个连接建立或者失效。如果该方法没有返回异常值，则该端口现在已经建立。</span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>当设备查找正在进行的时候，创建对远程蓝牙设备的新连接不可被尝试。在蓝牙适配器上，设备查找是一个重量级过程，并且肯定会降低一个设备的连接。使用
</span><code><span style='font-size:12.0pt'><a target="_blank" href="http://developer.android.com/reference/android/bluetooth/BluetoothAdapter.html#cancelDiscovery%28%29"><span
style='font-size:10.5pt;font-family:"Calibri","sans-serif"'>cancelDiscovery()</span></a></span></code><span
>方法去取消一个外界的查询。查询并不由活动所管理，而作为一个系统服务来运行，所以即使它不能直接请求一个查询，应用 程序也总会调用</span><code><span
lang=EN-US style='font-size:12.0pt'><a target="_blank" href="http://developer.android.com/reference/android/bluetooth/BluetoothAdapter.html#cancelDiscovery%28%29"><span
style='font-size:10.5pt;font-family:"Calibri","sans-serif"'>cancelDiscovery()</span></a></span></code><span
>方法。</span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><code><span
lang=EN-US style='font-size:12.0pt'><a target="_blank" href="http://developer.android.com/reference/android/bluetooth/BluetoothSocket.html#close%28%29"><span
style='font-size:10.5pt;font-family:"Calibri","sans-serif"'>close()</span></a></span></code><span
>方法可以用来放弃从另一线程而来的调用。</span></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
text-indent:21.0pt'><span >异常</span></p>
<p class=MsoNormal align=left style='margin-left:42.0pt;text-align:left;
text-indent:21.0pt'><span>IOException&nbsp;&nbsp;&nbsp;&nbsp; </span><span
>一个错误，例如连接失败。</span></p>
<p class=MsoNormal align=left style='text-align:left'><span
>&nbsp;</span></p>
<p class=MsoNormal align=left style='text-align:left'><span
>&nbsp;&nbsp;&nbsp; </span><span
style='background:#D9D9D9'>public InputStream <b>getInputStream</b> ()</span><span
lang=EN-US> </span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>通过连接的端口获得输入数据流</span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>即使该端口未连接，该输入数据流也会返回。不过在该数据流上的操作将抛出异常，直到相关的连接已经建立。</span></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
text-indent:21.0pt'><span >返回值</span></p>
<p class=MsoNormal align=left style='margin-left:42.0pt;text-align:left;
text-indent:21.0pt'><span >输入流</span></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
text-indent:21.0pt'><span >异常</span></p>
<p class=MsoNormal align=left style='margin-left:42.0pt;text-align:left;
text-indent:21.0pt'><span>IOException</span></p>
<p class=MsoNormal align=left style='text-align:left'><span
>&nbsp;</span></p>
<p class=MsoNormal align=left style='text-align:left'><span
>&nbsp;&nbsp;&nbsp; </span><span
style='background:#D9D9D9'>public OutputStream <b>getOutputStream</b> ()</span><span
lang=EN-US> </span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>通过连接的端口获得输出数据流</span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>即使该端口未连接，该输出数据流也会返回。不过在该数据流上的操作将抛出异常，直到相关的连接已经建立。</span></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
text-indent:21.0pt'><span >返回值</span></p>
<p class=MsoNormal align=left style='margin-left:42.0pt;text-align:left;
text-indent:21.0pt'><span >输出流</span></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
text-indent:21.0pt'><span >异常</span></p>
<p class=MsoNormal align=left style='margin-left:42.0pt;text-align:left;
text-indent:21.0pt'><span>IOException</span></p>
<p class=MsoNormal align=left style='text-align:left'><span
>&nbsp;</span></p>
<p class=MsoNormal align=left style='text-align:left'><span
>&nbsp;&nbsp;&nbsp; </span><span
style='background:#D9D9D9'>public BluetoothDevice <b>getRemoteDevice</b> ()</span><span
lang=EN-US> </span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>获得该端口正在连接或者已经连接的远程设备。</span></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
text-indent:21.0pt'><span >返回值</span></p>
<p class=MsoNormal align=left style='margin-left:42.0pt;text-align:left;
text-indent:21.0pt'><span >远程设备</span></p>
<p class=MsoNormal align=left style='text-align:left'><span
>&nbsp;</span></p>
<p class=MsoNormal align=left style='text-align:left'><b><span
>补充</span></b></p>
<p class=MsoNormal align=left style='text-align:left'><span
>&nbsp;&nbsp;&nbsp; </span><span >文章精选</span></p>
<p class=MsoNormal align=left style='text-align:left'><span
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a target="_blank" href="http://android.yaohuiji.com/archives/2509"><span><span
lang=EN-US>第四十一讲：Android</span></span><span><span>蓝牙编程入门</span></span></a></span></p>
<p class=MsoNormal align=left style='text-align:left'><span
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US><a target="_blank" href="http://www.android123.com.cn/androidkaifa/371.html">Android<span
lang=EN-US ><span>蓝牙</span></span>API<span
lang=EN-US ><span>之</span></span>BluetoothSocket<span
lang=EN-US ><span>类</span></span></a></span></p>
<p class=MsoNormal align=left style='text-align:left'><span
>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US><a target="_blank" href="http://www.android123.com.cn/androidkaifa/374.html">Android<span
lang=EN-US ><span>蓝牙</span></span>API<span
lang=EN-US ><span>之</span></span>BluetoothSocket<span
lang=EN-US ><span>类</span></span>(2)</a></span></p>
<p style='margin:0cm;margin-bottom:.0001pt'><span style='font-size:
10.5pt;font-family:"Calibri","sans-serif"'>&nbsp;</span></p>
<p class=MsoNormal><span>&nbsp;</span></p>

</div>

<span style='font-size:16.0pt;font-family:"Cambria","serif"'><br
clear=all style='page-break-before:auto'>
</span>

      
</body>
</html>
