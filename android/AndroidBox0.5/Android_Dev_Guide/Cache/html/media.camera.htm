<html>
<head>
<meta http-equiv=Content-Type content="text/html; charset=gb2312">
<link rel="stylesheet" href="Word2Chm.css" type="text/css">
</head>

<body lang=ZH-CN link=blue vlink=purple style='text-justify-trim:punctuation'>

<div class=WordSection1 style='layout-grid:15.6pt'>

<p class=MsoNormal align=center style='text-align:center'><b><span
style='font-size:16.0pt;'>摄像头</span></b></p>
<p class=MsoNormal align=center style='text-align:center'><span
>译者署名：</span><span style='font-family:"Calibri","sans-serif"'>
</span><span >呆呆大虾</span></p>
<p class=MsoNormal align=center style='text-align:center'><span
>译者微博：</span><span class=apple-style-span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#4B4B4B;background:
white'><a target="_blank" href="http://weibo.com/popapa">http://weibo.com/popapa</a> </span></span></p>
<p class=MsoNormal align=center style='text-align:center'><span
>版本：</span><span style='font-family:"Calibri","sans-serif"'>Android
4.0 r1</span></p>
<p class=MsoNormal align=left style='text-align:left'><b><span
style='font-size:12.0pt;'>原文</span></b></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US style='font-family:"Calibri","sans-serif"'><a target="_blank" href="http://developer.android.com/guide/topics/media/camera.html">http://developer.android.com/guide/topics/media/camera.html</a></span></p>
<p class=MsoNormal><span style='font-family:"Calibri","sans-serif"'>&nbsp;</span></p>
<p class=MsoNormal align=left style='text-align:left;layout-grid-mode:char'><b><span
style=';color:#7BB026'>在本文中</span></b></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
background:white'><u><span style='font-family:"Calibri","sans-serif";
color:#CC6600'><a href="#Consideration"><span style='font-family:
宋体;color:#CC6600'><span>需要考虑的问题</span></span></a></span></u></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
background:white'><u><span style='font-family:"Calibri","sans-serif";
color:#CC6600'><a href="#basic"><span style=';
color:#CC6600'><span>概述</span></span></a></span></u></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
background:white'><u><span style='font-family:"Calibri","sans-serif";
color:#CC6600'><a href="1.htm#manifest"><span style='color:#CC6600'>Manifest</span><span
lang=EN-US style=';color:#CC6600'><span>声明</span></span></a></span></u></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
background:white'><u><span style='font-family:"Calibri","sans-serif";
color:#CC6600'><a href="#exist_app"><span style=';
color:#CC6600'><span>使用</span></span><span
style=';color:#CC6600'><span>内置</span></span><span
lang=EN-US style=';color:#CC6600'><span>的<span>摄像</span></span></span></a></span></u><u><span style='font-family:
宋体;color:#CC6600'>头应用程序</span></u><u><span style='font-family:"Calibri","sans-serif";
color:#CC6600'> </span></u></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
background:white'><u><span style='font-family:"Calibri","sans-serif";
color:#CC6600'><a href="1.htm#intent_image"><span style='font-family:
宋体;color:#CC6600'><span>捕获图像的</span></span><span style='color:#CC6600'>intent</span></a>
</span></u></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
background:white'><u><span style='font-family:"Calibri","sans-serif";
color:#CC6600'><a href="1.htm#intent_video"><span style='font-family:
宋体;color:#CC6600'><span>捕获视频的</span></span><span style='color:#CC6600'>intent</span></a>
</span></u></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
background:white'><u><span style='font-family:"Calibri","sans-serif";
color:#CC6600'><a href="1.htm#intent_result"><span style='font-family:
宋体;color:#CC6600'><span>接收</span></span><span
style=';color:#CC6600'><span>摄像头</span></span><span
style='color:#CC6600'>intent</span><span style=';
color:#CC6600'><span>的结果</span></span></a> </span></u></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
background:white'><u><span style='font-family:"Calibri","sans-serif";
color:#CC6600'><a href="1.htm#build_app"><span style='font-family:
宋体;color:#CC6600'><span>创建摄像</span></span><span
style=';color:#CC6600'><span>头</span></span><span
lang=EN-US style=';color:#CC6600'><span>应用</span></span></a></span></u><u><span
style=';color:#CC6600'>程序</span></u><u><span
style='font-family:"Calibri","sans-serif";color:#CC6600'> </span></u></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
background:white'><u><span style=';color:#CC6600'>检测</span></u><u><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#CC6600'><a
href="1.htm#detect"><span style=';color:#CC6600'><span>摄像头<span>硬<span>件</span></span></span></span></a>
</span></u></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
background:white'><u><span style='font-family:"Calibri","sans-serif";
color:#CC6600'><a href="1.htm#access"><span style=';
color:#CC6600'><span>访问摄像头</span></span></a> </span></u></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
background:white'><u><span style='font-family:"Calibri","sans-serif";
color:#CC6600'><a href="1.htm#check_feature"><span style='font-family:
宋体;color:#CC6600'><span>检查</span></span><span
style=';color:#CC6600'><span>摄像头</span></span><span
style='color:#CC6600'>feature</span></a> </span></u></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
background:white'><u><span style='font-family:"Calibri","sans-serif";
color:#CC6600'><a href="1.htm#preview"><span style='font-family:
宋体;color:#CC6600'><span>创建</span></span><span
style=';color:#CC6600'><span>预<span>览类</span></span></span></a>
</span></u></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
background:white'><u><span style='font-family:"Calibri","sans-serif";
color:#CC6600'><a href="1.htm#preview_layout"><span
style=';color:#CC6600'><span>将预览画面置入</span></span><span
style='color:#CC6600'>layout</span></a> </span></u></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
background:white'><u><span style='font-family:"Calibri","sans-serif";
color:#CC6600'><a href="1.htm#capture_pic"><span style='font-family:
宋体;color:#CC6600'><span>捕获图像</span></span></a> </span></u></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
background:white'><u><span style='font-family:"Calibri","sans-serif";
color:#CC6600'><a href="1.htm#capture_video"><span style='font-family:
宋体;color:#CC6600'><span>捕获<span>视<span>频</span></span></span></span></a>
</span></u></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
background:white'><u><span style='font-family:"Calibri","sans-serif";
color:#CC6600'><a href="1.htm#release"><span style='font-family:
宋体;color:#CC6600'><span>释放</span></span><span
style=';color:#CC6600'><span>摄像头</span></span></a> </span></u></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
background:white'><u><span style='font-family:"Calibri","sans-serif";
color:#CC6600'><a href="#saveFile"><span style=';
color:#CC6600'><span>保存媒体文件</span></span></a> </span></u></p>
<p class=MsoNormal align=left style='text-align:left;layout-grid-mode:char'><b><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#7BB026'>&nbsp;</span></b></p>
<p class=MsoNormal align=left style='text-align:left'><b><span
style=';color:#7BB026'>关键类</span></b></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt;
background:white'><u><span style='font-family:"Calibri","sans-serif";
color:#CC6600'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html"><span
style='color:#CC6600'>Camera</span></a> </span></u></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt;
background:white'><u><span style='font-family:"Calibri","sans-serif";
color:#CC6600'><a target="_blank" href="http://developer.android.com/reference/android/view/SurfaceView.html"><span
style='color:#CC6600'>SurfaceView</span></a> </span></u></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt;
background:white'><u><span style='font-family:"Calibri","sans-serif";
color:#CC6600'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html"><span
style='color:#CC6600'>MediaRecorder</span></a> </span></u></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt;
background:white'><u><span style='font-family:"Calibri","sans-serif";
color:#CC6600'><a target="_blank" href="http://developer.android.com/reference/android/content/Intent.html"><span
style='color:#CC6600'>Intent</span></a> </span></u></p>
<p class=MsoNormal align=left style='text-align:left;background:white'><b><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#7BB026'>&nbsp;</span></b></p>
<p class=MsoNormal align=left style='text-align:left;layout-grid-mode:char'><b><span
style=';color:#7BB026'>参阅</span></b></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
background:white'><u><span style='font-family:"Calibri","sans-serif";
color:#CC6600'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html"><span
style='color:#CC6600'>Camera</span></a> </span></u></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
background:white'><u><span style='font-family:"Calibri","sans-serif";
color:#CC6600'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html"><span
style='color:#CC6600'>MediaRecorder</span></a> </span></u></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
background:white'><u><span style='font-family:"Calibri","sans-serif";
color:#CC6600'><a target="_blank" href="http://developer.android.com/guide/topics/data/data-storage.html"><span
lang=EN-US style=';color:#CC6600'><span>数据存储</span></span></a>
</span></u></p>
<p class=MsoNormal><span style='font-family:"Calibri","sans-serif"'>&nbsp;</span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
class=Arial><span style='font-family:"Calibri","sans-serif"'>Android</span></span><span
class=Arial><span >框架包含了对多种摄像头和摄像特性的支持，应用程序可以进行图片和视频的捕获。本文讨论了一种快速、简便的捕获图像和视频的方法，并简述了一种更高级的可为用户创建自定义摄像功能的方法。</span></span></p>
<p class=MsoNormal align=left style='text-align:left'><span
style='font-family:"Calibri","sans-serif";color:#333333'>&nbsp;</span></p>
<p class=MsoNormal align=left style='text-align:left'><span
style='font-family:"Calibri","sans-serif";color:#333333'>&nbsp;</span></p>
<p class=MsoNormal align=center style='text-align:center'><b><span
style='font-size:12.0pt;'>需要考虑的问题</span></b></p>
<p class=MsoNormal align=left style='text-align:left'><span style='font-family:
宋体'>在让应用程序使用</span><span style='font-family:"Calibri","sans-serif"'>Android</span><span
>设备的摄像头之前，应该考虑一些期望如何使用此硬件的问题。</span></p>
<p class=MsoNormal align=left style='margin-left:39.0pt;text-align:left;
text-indent:-18.0pt'><span style='font-size:10.0pt;font-family:Symbol;
color:#333333'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b><span >摄像头需求</span></b><b><span
style='font-family:"Calibri","sans-serif";color:#333333'> <span>―― </span></span></b><span
>摄像头的使用对于应用程序是否确实如此重要，以至于在没有摄像头的设备上就不期望安装此应用了？如果确实如此，应该</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'><a
href="1.htm#manifest"><span style=';color:#006699'><span>在</span></span><span style='color:#006699'>manifest</span><span
lang=EN-US style=';color:#006699'><span>中声明摄像头需求</span></span></a></span><span
style=';color:#333333'>。</span></p>
<p class=MsoNormal align=left style='margin-left:39.0pt;text-align:left;
text-indent:-18.0pt'><span style='font-size:10.0pt;font-family:Symbol'>・<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><b><span
>快速拍照还是自定义摄像</span></b><b><span style='font-family:"Calibri","sans-serif"'>
<span>―― </span></span></b><span >应用程序如何使用摄像头？仅仅是对快速拍照和视频片段感兴趣，还是要提供一种使用摄像头的新方式？对于快速拍照和摄像而言，可以考虑</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'><a
href="#exist_app"><span style=';color:#006699'><span>使用</span></span><span style=';color:#006699'><span>内置</span></span><span style=';color:#006699'><span>的摄像</span></span><span style=';color:#006699'><span>头</span></span><span style=';color:#006699'><span>应用</span></span></a></span><span >。为了开发一种定制的摄像头功能，请查看</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'><a
href="1.htm#build_app"><span style=';color:#006699'><span>创建</span></span><span style=';color:#006699'><span>摄像</span></span><span style=';color:#006699'><span>头</span></span><span style=';color:#006699'><span>应<span>用</span></span></span></a></span><span
>一节。</span></p>
<p class=MsoNormal align=left style='margin-left:39.0pt;text-align:left;
text-indent:-18.0pt'><span style='font-size:10.0pt;font-family:Symbol;
color:#333333'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b><span >存储</span></b><b><span
style='font-family:"Calibri","sans-serif"'> <span>―― </span></span></b><span
>应用程序产生的图像和视频是否期望仅对自身可见，还是可以共享</span><span
style='font-family:"Calibri","sans-serif"'>――</span><span style='font-family:
宋体'>以便相册或其它媒体应用也能够使用？当应用程序被卸载后，还期望图像和视频可用么？请查看</span><span
style='font-family:"Calibri","sans-serif";color:#333333'><a href="#saveFile"><span
lang=EN-US style=';color:#006699'><span>保存媒体文件</span></span></a></span><span
>一节来了解如何实现这些选项。</span></p>
<p class=MsoNormal align=left style='text-align:left'><b><span
style='font-family:"Calibri","sans-serif"'>&nbsp;</span></b></p>
<p class=MsoNormal align=left style='text-align:left'><b><span
style='font-family:"Calibri","sans-serif"'>&nbsp;</span></b></p>
<p class=MsoNormal align=center style='text-align:center'><b><span
style='font-size:12.0pt;;color:#333333'>概述</span></b></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>通过</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html"><span
style='color:#006699'>Camera</span></a></span><span
style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif"'>API </span><span
>或摄像头意图</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/content/Intent.html"><span
style='color:#006699'>Intent</span></a></span><span >，</span><span
lang=EN-US style='font-family:"Calibri","sans-serif"'>Android</span><span
>框架为图像和视频捕获提供支持。下面列出了有关的类：</span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html"><span
style='color:#006699'>Camera</span></a></span><span
style='font-family:"Calibri","sans-serif";color:#333333'> </span></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
text-indent:21.0pt'><span >此类是控制摄像头的主要</span><span
lang=EN-US style='font-family:"Calibri","sans-serif"'>API</span><span
>。在创建摄像头应用程序时，此类用于拍摄照片或视频。</span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><u><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#006699'><a target="_blank" href="http://developer.android.com/reference/android/view/SurfaceView.html"><span
style='color:#006699'>SurfaceView</span></a></span></u><span
style='font-family:"Calibri","sans-serif";color:#333333'> </span></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
text-indent:21.0pt'><span >此类用于向用户提供摄像头实时预览功能。</span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><u><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#006699'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html"><span
style='color:#006699'>MediaRecorder</span></a></span></u><span
style='font-family:"Calibri","sans-serif";color:#333333'> </span></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
text-indent:21.0pt'><span >此类用于从摄像头录制视频。</span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><u><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#006699'><a target="_blank" href="http://developer.android.com/reference/android/content/Intent.html"><span
style='color:#006699'>Intent</span></a></span></u><span
style='font-family:"Calibri","sans-serif";color:#333333'> </span></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
text-indent:21.0pt'><span >动作类型为</span><span
style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/provider/MediaStore.html#ACTION_IMAGE_CAPTURE"><span
style='color:#006699'>MediaStore.ACTION_IMAGE_CAPTURE</span></a></span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
>或</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/provider/MediaStore.html#ACTION_VIDEO_CAPTURE"><span
style='color:#006699'>MediaStore.ACTION_VIDEO_CAPTURE</span></a></span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
>的意图，可在不直接使用</span><span style='font-family:
"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html"><span
style='color:#006699'>Camera</span></a></span><span >对象的情况下捕获图像和视频。</span><a
name=manifest></a></p>
<p class=MsoNormal align=left style='text-align:left'><span
style='font-family:"Calibri","sans-serif";color:#333333'>&nbsp;</span></p>
<p class=MsoNormal align=left style='text-align:left'><span
style='font-family:"Calibri","sans-serif";color:#333333'>&nbsp;</span></p>
<p class=MsoNormal align=center style='text-align:center'><b><span
style='font-size:12.0pt;font-family:"Calibri","sans-serif";color:#111111'>Manifest</span></b><b><span
style='font-size:12.0pt;;color:#111111'>声明</span></b></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>开始开发摄像头</span><span style='font-family:"Calibri","sans-serif"'>
API</span><span >的应用之前，应该确保已经在</span><span
style='font-family:"Calibri","sans-serif"'>manifest</span><span
>中正确声明了对摄像头的使用及其它相关的</span><span
style='font-family:"Calibri","sans-serif"'>feature</span><span
>。</span></p>
<p class=MsoNormal align=left style='margin-left:39.0pt;text-align:left;
text-indent:-18.0pt'><span style='font-size:10.0pt;font-family:Symbol'>・<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><b><span
lang=EN-US style='font-family:"Calibri","sans-serif"'>Camera</span></b><b><span
>权限</span></b><b><span style='font-family:
"Calibri","sans-serif"'>――</span></b><span >应用程序必须对请求摄像头的使用权限。</span></p>

<div style='border:solid #CCCCCC 1.0pt;padding:8.0pt 8.0pt 8.0pt 8.0pt;
background:#FAFAFA;margin-left:42.0pt;margin-right:0cm'>

<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
background:#FAFAFA;border:none;padding:0cm'><span style='font-family:
"Calibri","sans-serif";color:#000088'>&lt;uses-permission</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#882288'>android:name</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>=</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#008800'>&quot;android.permission.CAMERA&quot;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>/&gt;</span></p>

</div>

<div style='border:none;border-left:solid #99AACC 3.0pt;padding:0cm 0cm 0cm 6.0pt;
margin-left:42.0pt;margin-right:0cm'>

<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
border:none;padding:0cm'><b><span >注意：</span></b><span
>如果是</span><span style='font-family:"Calibri","sans-serif";
color:#333333'><a target="_blank" href="http://developer.android.com/guide/topics/media/camera.html#intents#intents"><span
lang=EN-US style=';color:#006699'><span>通过意图</span></span></a></span><span
>来使用摄像头的，应用程序就不必请求本权限。</span></p>

</div>

<p class=MsoNormal align=left style='margin-left:39.0pt;text-align:left;
text-indent:-18.0pt'><span style='font-size:10.0pt;font-family:Symbol'>・<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><b><span
lang=EN-US style='font-family:"Calibri","sans-serif"'>Camera Feature――</span></b><span
>应用程序必须同时声明对</span><span style='font-family:
"Calibri","sans-serif"'>camera feature</span><span >的使用，例如：</span></p>

<div style='border:solid #CCCCCC 1.0pt;padding:8.0pt 8.0pt 8.0pt 8.0pt;
background:#FAFAFA;margin-left:42.0pt;margin-right:0cm'>

<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
background:#FAFAFA;border:none;padding:0cm'><span style='font-family:
"Calibri","sans-serif";color:#000088'>&lt;uses-feature</span><span
style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#882288'>android:name</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>=</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#008800'>&quot;android.hardware.camera&quot;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>/&gt;</span></p>

</div>

<p class=MsoNormal align=left style='margin-left:42.0pt;text-align:left'><span
>关于摄像头</span><span style='font-family:"Calibri","sans-serif"'>feature</span><span
>的清单，参阅</span><span style='font-family:"Calibri","sans-serif"'>manifest<span
style='color:#333333'> <a target="_blank" href="http://developer.android.com/guide/topics/manifest/uses-feature-element.html#features-reference"><span
style='color:#006699'>Feature</span><span style=';
color:#006699'><span>参考</span></span></a></span></span><span
style=';color:#333333'>。</span></p>
<p class=MsoNormal align=left style='margin-left:42.0pt;text-align:left'><span
>在</span><span style='font-family:"Calibri","sans-serif"'>manifest</span><span
>中加入</span><span style='font-family:"Calibri","sans-serif"'>camera
feature</span><span >，将会使得</span><span
style='font-family:"Calibri","sans-serif"'>Android Market</span><span
>在没有摄像头或不支持指定</span><span style='font-family:
"Calibri","sans-serif"'>feature</span><span >的设备上禁止安装该应用程序。关于</span><span
lang=EN-US style='font-family:"Calibri","sans-serif"'>Android Market</span><span
>基于</span><span style='font-family:"Calibri","sans-serif"'>feature</span><span
>过滤的使用详情，请参阅</span><span style='font-family:
"Calibri","sans-serif";color:#333333'><a target="_blank" href="http://developer.android.com/guide/topics/manifest/uses-feature-element.html#market-feature-filtering"><span
style='color:#006699'>Android Market</span><span style='font-family:
宋体;color:#006699'><span>和基于</span></span><span style='color:#006699'>Feature</span><span
lang=EN-US style=';color:#006699'><span>的过滤</span></span></a></span><span
style=';color:#333333'>。</span></p>
<p class=MsoNormal align=left style='margin-left:42.0pt;text-align:left'><span
>如果应用程序<i>可能用到</i>摄像头或摄像头</span><span
style='font-family:"Calibri","sans-serif"'>feature</span><span
>，但却不是<i>必需</i>的，则应在</span><span
style='font-family:"Calibri","sans-serif"'>manifest</span><span
>中指定包含</span><span style='font-family:"Calibri","sans-serif";
color:#007000'>android:required</span><span >属性的</span><span
lang=EN-US style='font-family:"Calibri","sans-serif"'>feature</span><span
>，并将该属性设为</span><span style='font-family:"Calibri","sans-serif";
color:#007000'>false</span><span style=';color:#007000'>：</span></p>

<div style='border:solid #CCCCCC 1.0pt;padding:8.0pt 8.0pt 8.0pt 8.0pt;
background:#FAFAFA;margin-left:42.0pt;margin-right:0cm'>

<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
background:#FAFAFA;border:none;padding:0cm'><span style='font-family:
"Calibri","sans-serif";color:#000088'>&lt;uses-feature</span><span
style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#882288'>android:name</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>=</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#008800'>&quot;android.hardware.camera&quot;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#882288'>android:required</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>=</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#008800'>&quot;false&quot;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>/&gt;</span></p>

</div>

<p class=MsoNormal align=left style='margin-left:39.0pt;text-align:left;
text-indent:-18.0pt'><span style='font-size:10.0pt;font-family:Symbol'>・<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><b><span
>存储权限</span></b><b><span style='font-family:
"Calibri","sans-serif"'>――</span></b><span >如果应用程序要把图像或视频保存到设备的外部存储上（</span><span
lang=EN-US style='font-family:"Calibri","sans-serif"'>SD</span><span
>卡），则还必须在</span><span style='font-family:"Calibri","sans-serif"'>manifest</span><span
>中指定如下权限。</span></p>

<div style='border:solid #CCCCCC 1.0pt;padding:8.0pt 8.0pt 8.0pt 8.0pt;
background:#FAFAFA;margin-left:42.0pt;margin-right:0cm'>

<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
background:#FAFAFA;border:none;padding:0cm'><span style='font-family:
"Calibri","sans-serif";color:#000088'>&lt;uses-permission</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#882288'>android:name</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>=</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#008800'>&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>/&gt;</span></p>

</div>

<p class=MsoNormal align=left style='margin-left:39.0pt;text-align:left;
text-indent:-18.0pt'><span style='font-size:10.0pt;font-family:Symbol'>・<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><b><span
>录音权限</span></b><b><span style='font-family:
"Calibri","sans-serif"'>――</span></b><span >要用音频捕获来录音，应用程序必须请求音频捕获权限。</span></p>

<div style='border:solid #CCCCCC 1.0pt;padding:8.0pt 8.0pt 8.0pt 8.0pt;
background:#FAFAFA;margin-left:42.0pt;margin-right:0cm'>

<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
background:#FAFAFA;border:none;padding:0cm'><span style='font-family:
"Calibri","sans-serif";color:#000088'>&lt;uses-permission</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#882288'>android:name</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>=</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#008800'>&quot;android.permission.RECORD_AUDIO&quot;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>/&gt;</span></p>

</div>

<p class=MsoNormal align=left style='text-align:left'><span
style='font-family:"Calibri","sans-serif";color:#333333'>&nbsp;</span></p>
<p class=MsoNormal align=left style='text-align:left'><span
style='font-family:"Calibri","sans-serif"'>&nbsp;</span></p>
<p class=MsoNormal align=center style='text-align:center'><b><span
style='font-size:12.0pt;'>使用内置的摄像头应用程序</span></b></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>有一种快捷的方法可以让应用程序不用额外编写很多代码就能实现拍照或摄像，这就是用意图</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/content/Intent.html"><span
style='color:#006699'>Intent</span></a></span><span >来调用内置的</span><span
lang=EN-US style='font-family:"Calibri","sans-serif"'>Android</span><span
>摄像头应用程序。摄像头意图（</span><span style='font-family:
"Calibri","sans-serif"'>intent</span><span >）会请求通过内置摄像应用来捕获图像或视频，并把控制权返回给应用程序。本节展示了如何用这种方法来捕获图像。</span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>通常按以下步骤来提交一个摄像头</span><span style='font-family:
"Calibri","sans-serif"'> intent</span><span >：</span></p>
<p class=MsoNormal align=left style='margin-left:42.1pt;text-align:left;
text-indent:-21.1pt'><b><span style='font-family:"Calibri","sans-serif";
color:#333333'>1. </span></b><b><span style=';color:#333333'>构建一个摄像头</span></b><b><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'> Intent</span></b><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'> ―― </span><span
>用以下意图类型之一，创建一个请求图像或视频的</span><span
style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/content/Intent.html"><span
style='color:#006699'>Intent</span></a></span><span
style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
style=';color:#333333'>：</span></p>
<p class=MsoNormal align=left style='margin-left:63.0pt;text-align:left;
text-indent:-21.0pt'><span style='font-size:10.0pt;font-family:"Courier New";
color:#333333'>o<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/provider/MediaStore.html#ACTION_IMAGE_CAPTURE"><span
style='color:#006699'>MediaStore.ACTION_IMAGE_CAPTURE</span></a></span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif"'>―― </span><span
>向内置摄像头程序请求图像的意图活动类型。</span></p>
<p class=MsoNormal align=left style='margin-left:63.0pt;text-align:left;
text-indent:-21.0pt'><span style='font-size:10.0pt;font-family:"Courier New";
color:#333333'>o<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/provider/MediaStore.html#ACTION_VIDEO_CAPTURE"><span
style='color:#006699'>MediaStore.ACTION_VIDEO_CAPTURE</span></a></span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif"'>―― </span><span
>向内置摄像头程序请求视频的意图活动类型。</span></p>
<p class=MsoNormal align=left style='margin-left:42.1pt;text-align:left;
text-indent:-21.1pt'><b><span style='font-family:"Calibri","sans-serif";
color:#333333'>2. </span></b><b><span style=';color:#333333'>启动摄像头</span></b><b><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'> Intent</span></b><span
lang=EN-US style='font-family:"Calibri","sans-serif"'> ――</span><span
>用</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/app/Activity.html#startActivityForResult(android.content.Intent, int)"><span
style='color:#006699'>startActivityForResult()</span></a></span><span
>方法执行摄像头</span><span style='font-family:"Calibri","sans-serif"'>
intent</span><span >。启动完毕后摄像头应用的用户界面就会显示在屏幕上，用户就可以拍照或摄像了。</span></p>
<p class=MsoNormal align=left style='margin-left:42.1pt;text-align:left;
text-indent:-21.1pt'><b><span style='font-family:"Calibri","sans-serif";
color:#333333'>3. </span></b><b><span style=';color:#333333'>接收</span></b><b><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'>Intent</span></b><b><span
style=';color:#333333'>结果</span></b><span style='font-family:
"Calibri","sans-serif";color:#333333'> </span><span
style='font-family:"Calibri","sans-serif"'>―― </span><span style='font-family:
宋体'>在应用程序中设置</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/app/Activity.html#onActivityResult(int, int, android.content.Intent)"><span
style='color:#006699'>onActivityResult()</span></a></span><span
>方法，用于接收从摄像头</span><span style='font-family:
"Calibri","sans-serif"'> intent</span><span >返回的数据。当用户拍摄完毕后（或者取消操作），系统会调用此方法。</span></p>
<p class=MsoNormal align=left style='text-align:left'><span
style='font-family:"Calibri","sans-serif";color:#333333'>&nbsp;</span></p>
<p class=MsoNormal align=left style='text-align:left'><a name="intent_image"><b><span
>捕获图像的</span></b></a><b><span
style='font-family:"Calibri","sans-serif"'>intent</span></b></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>如果希望程序以最少的代码实现拍照功能，利用摄像头</span><span
style='font-family:"Calibri","sans-serif"'>intent</span><span style='font-family:
宋体'>捕获图像是一条捷径。图像捕捉</span><span style='font-family:"Calibri","sans-serif"'>intent</span><span
>还可以包含以下附加信息：</span></p>
<p class=MsoNormal align=left style='margin-left:42.0pt;text-align:left;
text-indent:-21.0pt'><span style='font-size:10.0pt;font-family:Symbol;
color:#333333'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/provider/MediaStore.html#EXTRA_OUTPUT"><span
style='color:#006699'>MediaStore.EXTRA_OUTPUT</span></a></span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif"'>――</span><span
>本设置需要一个</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/net/Uri.html"><span
style='color:#006699'>Uri</span></a></span><span >对象，用于指定存放图片的路径和文件名。本设置是可选项，但强烈建议使用。如果未指定本设置值，那么摄像应用将会把所请求的图片以默认文件名和路径进行保存，并将数据置入</span><span
lang=EN-US style='font-family:"Calibri","sans-serif"'>intent</span><span
>的</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/content/Intent.html#getData()"><span
style='color:#006699'>Intent.getData()</span></a></span><span style='font-family:
宋体'>部分返回。</span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>以下例子演示了如何构建并执行一个图像捕获</span><span
style='font-family:"Calibri","sans-serif"'>intent</span><span style='font-family:
宋体'>。此例中的</span><span style='font-family:"Calibri","sans-serif";
color:#007000'>getOutputMediaFileUri()</span><span style='font-family:
"Calibri","sans-serif";color:#333333'> </span><span >方法引自</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'><a
href="#saveFile"><span style=';color:#006699'><span>保存媒体文件</span></span></a></span><span >中的例程代码。</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'>.</span></p>

<div style='border:solid #CCCCCC 1.0pt;padding:8.0pt 8.0pt 8.0pt 0cm;
background:#FAFAFA;margin-left:21.0pt;margin-right:0cm'>

<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:14.4pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:#000088'>private</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>static</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>final</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>int</span><span style='font-family:"Calibri","sans-serif";
color:black'> CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE </span><span
style='font-family:"Calibri","sans-serif";color:#666600'>=</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#006666'>100</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:14.4pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:#000088'>private</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#660066'>Uri</span><span style='font-family:"Calibri","sans-serif";
color:black'> fileUri</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>;</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:14.4pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:14.4pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:#006666'>@Override</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:14.4pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:#000088'>public</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>void</span><span style='font-family:"Calibri","sans-serif";
color:black'> onCreate</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:#660066'>Bundle</span><span style='font-family:"Calibri","sans-serif";
color:black'> savedInstanceState</span><span style='font-family:
"Calibri","sans-serif";color:#666600'>)</span><span
style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>{</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:14.4pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>super</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>onCreate</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:black'>savedInstanceState</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>);</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:14.4pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp; &nbsp; setContentView</span><span
style='font-family:"Calibri","sans-serif";color:#666600'>(</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>R</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>.</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>layout</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>.</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>main</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>);</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:14.4pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:14.4pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#880000'>// </span><span style=';color:#880000'>创建拍照</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#880000'>Intent</span><span
style=';color:#880000'>并将控制权返回给调用的程序</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:14.4pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#660066'>Intent</span><span style='font-family:"Calibri","sans-serif";
color:black'> intent </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>=</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>new</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#660066'>Intent</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:#660066'>MediaStore</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>ACTION_IMAGE_CAPTURE</span><span style='font-family:
"Calibri","sans-serif";color:#666600'>);</span><span
style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:14.4pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:14.4pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:black'>fileUri </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>=</span><span style='font-family:"Calibri","sans-serif";
color:black'> getOutputMediaFileUri</span><span style='font-family:
"Calibri","sans-serif";color:#666600'>(</span><span
style='font-family:"Calibri","sans-serif";color:black'>MEDIA_TYPE_IMAGE</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>);</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:14.4pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:#880000'>// </span><span style=';color:#880000'>创建保存图片的文件</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:14.4pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:black'>intent</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>putExtra</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:#660066'>MediaStore</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>EXTRA_OUTPUT</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>,</span><span style='font-family:"Calibri","sans-serif";
color:black'> fileUri</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>);</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:14.4pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:#880000'>// </span><span style=';color:#880000'>设置图片文件名</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:14.4pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:14.4pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#880000'>// </span><span style=';color:#880000'>启动图像捕获</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#880000'>Intent</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:14.4pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp; &nbsp; startActivityForResult</span><span
style='font-family:"Calibri","sans-serif";color:#666600'>(</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>intent</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>,</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>
CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE</span><span style='font-family:
"Calibri","sans-serif";color:#666600'>);</span><span
style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:14.4pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:#666600'>}</span></p>

</div>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/app/Activity.html#startActivityForResult(android.content.Intent, int)"><span
style='color:#006699'>startActivityForResult()</span></a></span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
>方法执行完毕后，用户将看到内置摄像头应用程序的界面。用户拍照完毕（或取消操作）后，用户界面返回应用程序，这时必须截获</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/app/Activity.html#onActivityResult(int, int, android.content.Intent)"><span
style='color:#006699'>onActivityResult()</span></a></span><span
>方法来接收</span><span style='font-family:"Calibri","sans-serif"'>intent</span><span
>的返回结果并执行后续操作。关于如何接收完整的</span><span
style='font-family:"Calibri","sans-serif"'>intent</span><span style='font-family:
宋体'>，请参阅</span><span style='font-family:"Calibri","sans-serif";
color:#333333'><a href="1.htm#intent_result"><span style='font-family:
宋体;color:#006699'><span>接收</span></span><span
style=';color:#006699'><span>摄像头</span></span><span
style='color:#006699'> Intent</span><span style=';
color:#006699'><span>的结果</span></span></a></span><span
style=';color:#333333'>。</span></p>
<p class=MsoNormal align=left style='text-align:left'><span
style='font-family:"Calibri","sans-serif";color:#333333'>&nbsp;</span></p>
<p class=MsoNormal align=left style='text-align:left'><a name="intent_video"><b><span
style='font-size:12.0pt;;color:#3A3A3A'>捕获视频的</span></b></a><b><span
lang=EN-US style='font-size:12.0pt;font-family:"Calibri","sans-serif";
color:#3A3A3A'>intent</span></b></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
style=';color:#333333'>如果希望程序以最少的代码实现摄像功能，利用摄像头</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'> intent</span><span
style=';color:#333333'>捕获视频是一条捷径。视频捕捉</span><span
style='font-family:"Calibri","sans-serif";color:#333333'>intent</span><span
style=';color:#333333'>可以包含以下附带信息：</span></p>
<p class=MsoNormal align=left style='margin-left:42.0pt;text-align:left;
text-indent:-21.0pt'><span style='font-size:10.0pt;font-family:Symbol;
color:#333333'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/provider/MediaStore.html#EXTRA_OUTPUT"><span
style='color:#006699'>MediaStore.EXTRA_OUTPUT</span></a></span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'> ―― </span><span
style=';color:#333333'>本设置需要一个</span><span
style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/net/Uri.html"><span
style='color:#006699'>Uri</span></a></span><span style=';
color:#333333'>，</span><span >用于指定保存视频的路径和文件名。本设置是可选项，但强烈建议使用。如果未指定本设置值，那么摄像应用将会把所请求的视频以默认文件名和路径进行保存，并将数据置入</span><span
lang=EN-US style='font-family:"Calibri","sans-serif"'>intent</span><span
>的</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/content/Intent.html#getData()"><span
style='color:#006699'>Intent.getData()</span></a></span><span style='font-family:
宋体'>部分返回。</span></p>
<p class=MsoNormal align=left style='margin-left:42.0pt;text-align:left;
text-indent:-21.0pt'><span style='font-size:10.0pt;font-family:Symbol'>・<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/provider/MediaStore.html#EXTRA_VIDEO_QUALITY"><span
style='color:#006699'>MediaStore.EXTRA_VIDEO_QUALITY</span></a></span><span
lang=EN-US style='font-family:"Calibri","sans-serif"'> ――</span><span
>本值用</span><span style='font-family:"Calibri","sans-serif"'>0</span><span
>表示最低品质及最小的文件尺寸，用</span><span
style='font-family:"Calibri","sans-serif"'>1</span><span style='font-family:
宋体'>表示最高品质和较大的文件尺寸。</span></p>
<p class=MsoNormal align=left style='margin-left:42.0pt;text-align:left;
text-indent:-21.0pt'><span style='font-size:10.0pt;font-family:Symbol;
color:#333333'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/provider/MediaStore.html#EXTRA_DURATION_LIMIT"><span
style='color:#006699'>MediaStore.EXTRA_DURATION_LIMIT</span></a></span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif"'>――</span><span
>本值用于限制所捕获视频的长度，以秒为单位。</span></p>
<p class=MsoNormal align=left style='margin-left:42.0pt;text-align:left;
text-indent:-21.0pt'><span style='font-size:10.0pt;font-family:Symbol'>・<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/provider/MediaStore.html#EXTRA_SIZE_LIMIT"><span
style='color:#006699'>MediaStore.EXTRA_SIZE_LIMIT</span></a></span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif"'>―― </span><span
>本值用于限制所捕获视频的文件尺寸，以字节为单位。</span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>以下例子演示了如何构建并执行一个视频捕获</span><span
style='font-family:"Calibri","sans-serif"'>intent</span><span style='font-family:
宋体'>。本例中的</span><span style='font-family:"Calibri","sans-serif";
color:#007000'>getOutputMediaFileUri()</span><span >方法引自</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'><a
href="#saveFile"><span style=';color:#006699'><span>保存媒体文件</span></span></a></span><span >中的例程代码。</span></p>

<div style='border:solid #CCCCCC 1.0pt;padding:8.0pt 8.0pt 8.0pt 8.0pt;
background:#FAFAFA;margin-left:1.0cm;margin-right:0cm'>

<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:7.05pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:#000088'>private</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>static</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>final</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>int</span><span style='font-family:"Calibri","sans-serif";
color:black'> CAPTURE_VIDEO_ACTIVITY_REQUEST_CODE </span><span
style='font-family:"Calibri","sans-serif";color:#666600'>=</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#006666'>200</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:7.05pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:#000088'>private</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#660066'>Uri</span><span style='font-family:"Calibri","sans-serif";
color:black'> fileUri</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>;</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:7.05pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:7.05pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:#006666'>@Override</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:7.05pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:#000088'>public</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>void</span><span style='font-family:"Calibri","sans-serif";
color:black'> onCreate</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:#660066'>Bundle</span><span style='font-family:"Calibri","sans-serif";
color:black'> savedInstanceState</span><span style='font-family:
"Calibri","sans-serif";color:#666600'>)</span><span
style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>{</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:7.05pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>super</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>onCreate</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:black'>savedInstanceState</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>);</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:7.05pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp; &nbsp; setContentView</span><span
style='font-family:"Calibri","sans-serif";color:#666600'>(</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>R</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>.</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>layout</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>.</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>main</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>);</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:7.05pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:7.05pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#880000'>// </span><span style=';color:#880000'>创建新的</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#880000'>Intent</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:7.05pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#660066'>Intent</span><span style='font-family:"Calibri","sans-serif";
color:black'> intent </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>=</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>new</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#660066'>Intent</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:#660066'>MediaStore</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>ACTION_VIDEO_CAPTURE</span><span style='font-family:
"Calibri","sans-serif";color:#666600'>);</span><span
style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:7.05pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:7.05pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:black'>fileUri </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>=</span><span style='font-family:"Calibri","sans-serif";
color:black'> getOutputMediaFileUri</span><span style='font-family:
"Calibri","sans-serif";color:#666600'>(</span><span
style='font-family:"Calibri","sans-serif";color:black'>MEDIA_TYPE_VIDEO</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>);</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> &nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:7.05pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:#880000'>// </span><span style=';color:#880000'>创建保存视频的文件</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:7.05pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:black'>intent</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>putExtra</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:#660066'>MediaStore</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>EXTRA_OUTPUT</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>,</span><span style='font-family:"Calibri","sans-serif";
color:black'> fileUri</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>);</span><span style='font-family:"Calibri","sans-serif";
color:black'> &nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:7.05pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:#880000'>// </span><span style=';color:#880000'>设置视频文件名</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:7.05pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:7.05pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:black'>intent</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>putExtra</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:#660066'>MediaStore</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>EXTRA_VIDEO_QUALITY</span><span style='font-family:
"Calibri","sans-serif";color:#666600'>,</span><span
style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#006666'>1</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>);</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:7.05pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:#880000'>// </span><span style=';color:#880000'>设置视频的品质为高</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:7.05pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:7.05pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#880000'>// </span><span style=';color:#880000'>启动视频捕获</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#880000'>Intent</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:7.05pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp; &nbsp; startActivityForResult</span><span
style='font-family:"Calibri","sans-serif";color:#666600'>(</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>intent</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>,</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>
CAPTURE_VIDEO_ACTIVITY_REQUEST_CODE</span><span style='font-family:
"Calibri","sans-serif";color:#666600'>);</span><span
style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:7.05pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:#666600'>}</span></p>

</div>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/app/Activity.html#startActivityForResult(android.content.Intent, int)"><span
style='color:#006699'>startActivityForResult()</span></a></span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
>方法执行完毕后，用户将看到一个改动过的摄像程序界面。用户摄像完毕（或取消操作）后，用户界面返回应用程序，这时必须监听</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/app/Activity.html#onActivityResult(int, int, android.content.Intent)"><span
style='color:#006699'>onActivityResult()</span></a></span><span
>方法来接收</span><span style='font-family:"Calibri","sans-serif"'>intent</span><span
>的返回结果并执行后续操作。关于如何接收完整的</span><span
style='font-family:"Calibri","sans-serif"'>intent</span><span style='font-family:
宋体'>，请参阅下一节。</span></p>
<p class=MsoNormal align=left style='text-align:left'><span
style='font-family:"Calibri","sans-serif";color:#333333'>&nbsp;</span></p>
<p class=MsoNormal align=left style='text-align:left'><a name="intent_result"><b><span
style=';color:#3A3A3A'>接收摄像头</span></b></a><b><span
style='font-family:"Calibri","sans-serif";color:#3A3A3A'> intent</span></b><b><span
style=';color:#3A3A3A'>的结果</span></b></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>一旦已构建并运行了图像或视频的摄像头</span><span
style='font-family:"Calibri","sans-serif"'>intent</span><span style='font-family:
宋体'>，应用程序就必须进行设置，以接收</span><span style='font-family:"Calibri","sans-serif"'>intent</span><span
>返回的结果。本节展示了如何监听摄像头</span><span
style='font-family:"Calibri","sans-serif"'>intent</span><span style='font-family:
宋体'>的回调方法，以便应用程序对捕获到的图片及视频进行进一步的处理。</span></p>
<p class=MsoNormal align=left style='text-align:left'><span style='font-family:
宋体'>要接收</span><span style='font-family:"Calibri","sans-serif"'>intent</span><span
>的返回结果，必须覆盖启动</span><span style='font-family:
"Calibri","sans-serif"'>intent</span><span >的</span><span
lang=EN-US style='font-family:"Calibri","sans-serif"'>activity</span><span
>中的</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/app/Activity.html#onActivityResult(int, int, android.content.Intent)"><span
style='color:#006699'>onActivityResult()</span></a></span><span
>方法。以下例子演示了如何覆盖</span><span style='font-family:
"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/app/Activity.html#onActivityResult(int, int, android.content.Intent)"><span
style='color:#006699'>onActivityResult()</span></a></span><span
>来获取上述章节例程中的</span><span style='font-family:
"Calibri","sans-serif";color:#333333'><a href="1.htm#intent_image"><span
lang=EN-US style=';color:#006699'><span>图像捕获</span></span><span
style='color:#006699'>intent</span></a></span><span style=';
color:#333333'>或</span><span style='font-family:"Calibri","sans-serif";
color:#333333'><a href="1.htm#intent_video"><span style='font-family:
宋体;color:#006699'><span>视频捕获</span></span><span style='color:#006699'>intent</span></a></span><span
>的结果。</span></p>

<div style='border:solid #CCCCCC 1.0pt;padding:8.0pt 8.0pt 8.0pt 8.0pt;
background:#FAFAFA;margin-left:21.0pt;margin-right:0cm'>

<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>private</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>static</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>final</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>int</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>
CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE </span><span style='font-family:
"Calibri","sans-serif";color:#666600'>=</span><span
style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#006666'>100</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>private</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>static</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>final</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>int</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>
CAPTURE_VIDEO_ACTIVITY_REQUEST_CODE </span><span style='font-family:
"Calibri","sans-serif";color:#666600'>=</span><span
style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#006666'>200</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#006666'>@Override</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>protected</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>void</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>
onActivityResult</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:#000088'>int</span><span style='font-family:"Calibri","sans-serif";
color:black'> requestCode</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>,</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>int</span><span style='font-family:"Calibri","sans-serif";
color:black'> resultCode</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>,</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#660066'>Intent</span><span style='font-family:"Calibri","sans-serif";
color:black'> data</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>)</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>{</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#000088'>if</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>(</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>requestCode </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>==</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>
CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE</span><span style='font-family:
"Calibri","sans-serif";color:#666600'>)</span><span
style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>{</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>if</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:black'>resultCode </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>==</span><span style='font-family:"Calibri","sans-serif";
color:black'> RESULT_OK</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>)</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>{</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#880000'>// </span><span style=';color:#880000'>捕获的图像保存到</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#880000'>Intent</span><span
style=';color:#880000'>指定的</span><span
style='font-family:"Calibri","sans-serif";color:#880000'>fileUri</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#660066'>Toast</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>makeText</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:#000088'>this</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>,</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#008800'>&quot;Image saved to:\n&quot;</span><span
style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>+</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;data</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>.</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>getData</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>(),</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#660066'>Toast</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>.</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>LENGTH_LONG</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>).</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>show</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>();</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>}</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>else</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>if</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:black'>resultCode </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>==</span><span style='font-family:"Calibri","sans-serif";
color:black'> RESULT_CANCELED</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>)</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>{</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#880000'>// </span><span style=';color:#880000'>用户取消了图像捕获</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>}</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>else</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>{</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#880000'>// </span><span style=';color:#880000'>图像捕获失败，提示用户</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>}</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#666600'>}</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#000088'>if</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>(</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>requestCode </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>==</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>
CAPTURE_VIDEO_ACTIVITY_REQUEST_CODE</span><span style='font-family:
"Calibri","sans-serif";color:#666600'>)</span><span
style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>{</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>if</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:black'>resultCode </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>==</span><span style='font-family:"Calibri","sans-serif";
color:black'> RESULT_OK</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>)</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>{</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#880000'>// </span><span style=';color:#880000'>捕获的视频保存到</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#880000'>Intent</span><span
style=';color:#880000'>指定的</span><span
style='font-family:"Calibri","sans-serif";color:#880000'>fileUri</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#660066'>Toast</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>makeText</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:#000088'>this</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>,</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#008800'>&quot;Video saved to:\n&quot;</span><span
style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>+</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;data</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>.</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>getData</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>(),</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#660066'>Toast</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>.</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>LENGTH_LONG</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>).</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>show</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>();</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>}</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>else</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>if</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:black'>resultCode </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>==</span><span style='font-family:"Calibri","sans-serif";
color:black'> RESULT_CANCELED</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>)</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>{</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#880000'>// </span><span style=';color:#880000'>用户取消了视频捕获</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>}</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>else</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>{</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#880000'>// </span><span style=';color:#880000'>视频捕获失败，提示用户</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>}</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#666600'>}</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>}</span></p>

</div>

<p class=MsoNormal align=left style='text-align:left'><span style='font-family:
宋体'>一旦</span><span style='font-family:"Calibri","sans-serif"'>activity</span><span
>接收到成功的结果，就说明捕获到的图像或视频已保存到指定位置了，应用程序就可对其进行访问。</span><a
name="build_app"></a></p>
<p class=MsoNormal align=left style='text-align:left'><span
style='font-family:"Calibri","sans-serif"'>&nbsp;</span></p>
<p class=MsoNormal align=left style='text-align:left'><span
style='font-family:"Calibri","sans-serif"'>&nbsp;</span></p>
<p class=MsoNormal align=center style='text-align:center'><b><span
style='font-size:12.0pt;'>创建摄像头应用程序</span></b></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>有些开发人员可能需要自定义外观的摄像头用户界面，或者需要提供特殊的功能。相比</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'><a
href="1.htm#intent_image"><span style=';color:#006699'><span>使用</span></span><span style='color:#006699'>intent</span></a></span><span
>而言，创建定制的摄像</span><span style='font-family:
"Calibri","sans-serif"'>activity</span><span >需要编写更多的代码，不过也能向用户提供更吸引人的使用感受。</span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>通常按照以下步骤创建一个定制的摄像界面：</span></p>
<p class=MsoNormal align=left style='margin-left:42.1pt;text-align:left;
text-indent:-21.1pt'><span style='font-size:10.0pt;font-family:Symbol;
color:#333333'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b><span style=';color:#333333'>检测并访问摄像头</span></b><b><span
style='font-family:"Calibri","sans-serif"'> <span>――</span></span></b><span
lang=EN-US style='font-family:"Calibri","sans-serif"'> </span><span
>创建代码以检查摄像头存在与否并请求访问。</span></p>
<p class=MsoNormal align=left style='margin-left:42.1pt;text-align:left;
text-indent:-21.1pt'><span style='font-size:10.0pt;font-family:Symbol;
color:#333333'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b><span style=';color:#333333'>创建预览类</span></b><b><span
lang=EN-US style='font-family:"Calibri","sans-serif"'> ――</span></b><span
lang=EN-US style='font-family:"Calibri","sans-serif"'> </span><span
>创建继承自</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/view/SurfaceView.html"><span
style='color:#006699'>SurfaceView</span></a></span><span
style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
>并实现</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/view/SurfaceHolder.html"><span
style='color:#006699'>SurfaceHolder</span></a></span><span
style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
>接口的摄像预览类。此类能预览摄像的实时图像。</span></p>
<p class=MsoNormal align=left style='margin-left:42.1pt;text-align:left;
text-indent:-21.1pt'><span style='font-size:10.0pt;font-family:Symbol;
color:#333333'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b><span >建立预览布局</span></b><b><span
lang=EN-US style='font-family:"Calibri","sans-serif"'>Preview Layout</span></b><span
lang=EN-US style='font-family:"Calibri","sans-serif"'> <b>―― </b></span><span
>一旦有了摄像预览类，即可创建一个</span><span
style='font-family:"Calibri","sans-serif"'>view layout</span><span
>，用于把预览画面与设计好的用户界面控件融合在一起。</span></p>
<p class=MsoNormal align=left style='margin-left:42.1pt;text-align:left;
text-indent:-21.1pt'><span style='font-size:10.0pt;font-family:Symbol'>・<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><b><span
>为捕获设置侦听器</span></b><b><span style='font-family:
"Calibri","sans-serif"'>Listener</span></b><span style='font-family:
"Calibri","sans-serif"'> <b>―― </b></span><span >将用户界面控件连接到</span><span
lang=EN-US style='font-family:"Calibri","sans-serif"'>listener</span><span
>，使其能响应用户操作开始捕获图像或视频，比如按下按钮。</span></p>
<p class=MsoNormal align=left style='margin-left:42.1pt;text-align:left;
text-indent:-21.1pt'><span style='font-size:10.0pt;font-family:Symbol'>・<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><b><span
>捕获并保存文件</span></b><b><span style='font-family:
"Calibri","sans-serif"'> ――</span></b><span style='font-family:"Calibri","sans-serif"'>
</span><span >建立捕获图片或视频并保存到输出文件的代码。</span></p>
<p class=MsoNormal align=left style='margin-left:42.1pt;text-align:left;
text-indent:-21.1pt'><span style='font-size:10.0pt;font-family:Symbol'>・<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><b><span
>释放摄像头</span></b><b><span style='font-family:"Calibri","sans-serif"'>
<span>―― </span></span></b><span >摄像头使用完毕后，应用程序必须正确地将其释放，便于其它程序的使用。</span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>摄像头硬件是一个共享资源，必须对其进行细心的管理，因此需要使用它的应用程序之间不能发生冲突。下一节将会讨论如何检测摄像头硬件、如何请求访问摄像头、使用完毕如何释放。</span></p>

<div style='border:none;border-left:solid #FFCF00 3.0pt;padding:0cm 0cm 0cm 6.0pt'>

<p class=MsoNormal align=left style='text-align:left;border:none;padding:0cm'><b><span
style=';color:#333333'>警告：</span></b><span style='font-family:
宋体'>应用程序用完摄像头后，请记得调用</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html#release()"><span
style='color:#006699'>Camera.release()</span></a></span><span style='font-family:
宋体'>释放</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html"><span
style='color:#006699'>Camera</span></a></span><span >对象！如果某应用程序未能正确释放摄像头，所有后续访问摄像头的尝试（包括此应用程序自身）都将会失败，并可能导致程序被强行关闭。</span></p>

</div>

<p class=MsoNormal align=left style='text-align:left'><a name=detect><b><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#3A3A3A'>&nbsp;</span></b></a></p>
<p class=MsoNormal align=left style='text-align:left'><b><span
style=';color:#3A3A3A'>检测摄像头硬件</span></b></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>如果应用程序未利用</span><span style='font-family:
"Calibri","sans-serif"'>manifest</span><span >声明对摄像头需求进行特别指明，则应该在运行时检查一下摄像头是否可用。可用</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/content/pm/PackageManager.html#hasSystemFeature(java.lang.String)"><span
style='color:#006699'>PackageManager.hasSystemFeature()</span></a></span><span
>方法来进行这种检查，代码示例如下：</span></p>

<div style='border:solid #CCCCCC 1.0pt;padding:8.0pt 8.0pt 8.0pt 8.0pt;
background:#FAFAFA;margin-left:21.0pt;margin-right:0cm'>

<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#880000'>/** </span><span
style=';color:#880000'>检查设备是否提供摄像头</span><span style='font-family:
"Calibri","sans-serif";color:#880000'> <span>*/</span></span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>private</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>boolean</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>
checkCameraHardware</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:#660066'>Context</span><span style='font-family:"Calibri","sans-serif";
color:black'> context</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>)</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>{</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#000088'>if</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>(</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>context</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>.</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>getPackageManager</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>().</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>hasSystemFeature</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>(</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#660066'>PackageManager</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>.</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>FEATURE_CAMERA</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>)){</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#880000'>// </span><span style=';color:#880000'>摄像头存在</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>return</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>true</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>;</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#666600'>}</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>else</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>{</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#880000'>// </span><span style=';color:#880000'>摄像头不存在</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>return</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>false</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>;</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#666600'>}</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>}</span></p>

</div>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US style='font-family:"Calibri","sans-serif"'>Android</span><span
>设备可能拥有多个摄像头，比如向后的摄像头用于拍照、向前的摄像头用于摄像。</span><span
lang=EN-US style='font-family:"Calibri","sans-serif"'>Android 2.3 (API Level 9)
</span><span >以上版本允许利用</span><span
style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html#getNumberOfCameras()"><span
style='color:#006699'>Camera.getNumberOfCameras()</span></a></span><span
>方法来检查设备可用摄像头的数量。</span></p>
<p class=MsoNormal align=left style='text-align:left'><span
style='font-family:"Calibri","sans-serif";color:#333333'>&nbsp;</span></p>
<p class=MsoNormal align=left style='text-align:left'><a name=access><b><span
style=';color:#3A3A3A'>访问摄像头</span></b></a></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>如果在运行程序的设备上已经检测到了摄像头，则必须通过获取一个</span><span
style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html"><span
style='color:#006699'>Camera</span></a></span><span >的实例来请求对其访问（除非使用了</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'><a
href="1.htm#intent_image"><span style=';color:#006699'><span>用于</span></span><span style=';color:#006699'><span>访问</span></span><span style=';color:#006699'><span>摄像头的</span></span><span style='color:#006699'>intent</span></a></span><span
>）。</span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>可用</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html#open()"><span
style='color:#006699'>Camera.open()</span></a></span><span style='font-family:
宋体'>方法来访问主摄像头，并确保捕获全部的异常，示例代码如下：</span></p>

<div style='border:solid #CCCCCC 1.0pt;padding:8.0pt 8.0pt 8.0pt 8.0pt;
background:#FAFAFA;margin-left:1.0cm;margin-right:0cm'>

<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#880000'>/** </span><span
style=';color:#880000'>安全获取</span><span
style='font-family:"Calibri","sans-serif";color:#880000'>Camera</span><span
style=';color:#880000'>对象实例的方法</span><span
style='font-family:"Calibri","sans-serif";color:#880000'>*/</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>public</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>static</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#660066'>Camera</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>
getCameraInstance</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(){</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#660066'>Camera</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> c </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>=</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>null</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#000088'>try</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>{</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; c </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>=</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#660066'>Camera</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>open</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>();</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#880000'>// </span><span style=';color:#880000'>试图获取</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#880000'>Camera</span><span
style=';color:#880000'>实例</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#666600'>}</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#000088'>catch</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>(</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#660066'>Exception</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> e</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>){</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#880000'>// </span><span style=';color:#880000'>摄像头不可用（正被占用或不存在）</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#666600'>}</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#000088'>return</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> c</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#880000'>// </span><span
style=';color:#880000'>不可用则返回</span><span
style='font-family:"Calibri","sans-serif";color:#880000'>null</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>}</span></p>

</div>

<div style='border:none;border-left:solid #FFCF00 3.0pt;padding:0cm 0cm 0cm 6.0pt;
margin-left:21.0pt;margin-right:0cm'>

<p class=MsoNormal align=left style='text-align:left;border:none;padding:0cm'><b><span
style=';color:#333333'>警告：</span></b><span style='font-family:
"Calibri","sans-serif";color:#333333'> </span><span style=';
color:#333333'>每次使用</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html#open()"><span
style='color:#006699'>Camera.open()</span></a></span><span style='font-family:
宋体;color:#333333'>时都要检查异常。如果摄像头被占用或者不存在，未检查异常将会导致应用程序被系统强行关闭。</span></p>

</div>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>在运行</span><span style='font-family:"Calibri","sans-serif"'>Android
2.3 (API Level 9) </span><span >以上版本的设备上，可以用</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html#open(int)"><span
style='color:#006699'>Camera.open(int)</span></a></span><span style='font-family:
宋体'>访问指定的摄像头。在拥有多于一个摄像头的设备上，以上示例代码将会访问第一个也即朝后的那个摄像头。</span></p>
<p class=MsoNormal align=left style='text-align:left'><span
style='font-size:10.0pt;font-family:"Calibri","sans-serif";color:#333333'>&nbsp;</span></p>
<p class=MsoNormal align=left style='text-align:left'><a name="check_feature"><b><span
style=';color:#3A3A3A'>检查摄像头</span></b></a><b><span
style='font-family:"Calibri","sans-serif";color:#3A3A3A'>feature</span></b></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>一旦获得了摄像头的访问权，就可以通过</span><span
style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html#getParameters()"><span
style='color:#006699'>Camera.getParameters()</span></a></span><span
>方法来获取更多信息，检查返回的</span><span style='font-family:
"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.Parameters.html"><span
style='color:#006699'>Camera.Parameters</span></a></span><span
>对象可查看摄像头所支持的</span><span style='font-family:
"Calibri","sans-serif"'>feature</span><span >。如果正在使用</span><span
lang=EN-US style='font-family:"Calibri","sans-serif"'>API Level 9</span><span
>以上版本，可用</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html#getCameraInfo(int, android.hardware.Camera.CameraInfo)"><span
style='color:#006699'>Camera.getCameraInfo()</span></a></span><span
>来确定摄像头朝前还是朝后以及图像的方向。</span></p>
<p class=MsoNormal align=left style='text-align:left'><b><span
style='font-family:"Calibri","sans-serif";color:#3A3A3A'>&nbsp;</span></b></p>
<p class=MsoNormal align=left style='text-align:left'><a name=preview><b><span
style=';color:#3A3A3A'>创建预览类</span></b></a></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>为了方便拍照或摄像，用户必须能看到摄像头所拍摄的画面。摄像头预览类就是一种能够显示摄像头实时数据的</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/view/SurfaceView.html"><span
style='color:#006699'>SurfaceView</span></a></span><span style='font-family:
宋体'>，用户可以调整并捕获图片和视频。</span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>以下示例代码演示了如何创建一个基本的摄像头预览类，它可被嵌入一个</span><span
style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/view/View.html"><span
style='color:#006699'>View</span></a></span><span style=';
color:#333333'>布局中</span><span >。为了捕捉</span><span
lang=EN-US style='font-family:"Calibri","sans-serif"'>view</span><span
>创建和销毁时的回调事件，此类实现了</span><span
style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/view/SurfaceHolder.Callback.html"><span
style='color:#006699'>SurfaceHolder.Callback</span></a></span><span
>，这在指定摄像头预览的输入时需要用到。</span></p>

<div style='border:solid #CCCCCC 1.0pt;padding:8.0pt 8.0pt 8.0pt 8.0pt;
background:#FAFAFA;margin-left:21.0pt;margin-right:0cm'>

<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#880000'>/** </span><span
style=';color:#880000'>基本的摄像头预览类</span><span style='font-family:
"Calibri","sans-serif";color:#880000'> <span>*/</span></span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>public</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>class</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#660066'>CameraPreview</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>extends</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#660066'>SurfaceView</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>implements</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#660066'>SurfaceHolder</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>.</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#660066'>Callback</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>{</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#000088'>private</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#660066'>SurfaceHolder</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> mHolder</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#000088'>private</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#660066'>Camera</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> mCamera</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#000088'>public</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#660066'>CameraPreview</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>(</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#660066'>Context</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> context</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>,</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#660066'>Camera</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> camera</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>)</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>{</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>super</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:black'>context</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>);</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; mCamera </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>=</span><span style='font-family:"Calibri","sans-serif";
color:black'> camera</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>;</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#880000'>// </span><span style=';color:#880000'>安装一个</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#880000'>SurfaceHolder.Callback</span><span
style=';color:#880000'>，</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#880000'>// </span><span style=';color:#880000'>这样创建和销毁底层</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#880000'>surface</span><span
style=';color:#880000'>时能够获得通知。</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; mHolder </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>=</span><span style='font-family:"Calibri","sans-serif";
color:black'> getHolder</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>();</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; mHolder</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>addCallback</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:#000088'>this</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>);</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#880000'>// </span><span style=';color:#880000'>已过期的设置，但版本低于</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#880000'>3.0</span><span
style=';color:#880000'>的</span><span style='font-family:
"Calibri","sans-serif";color:#880000'>Android</span><span style='font-family:
宋体;color:#880000'>还需要</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; mHolder</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>setType</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:#660066'>SurfaceHolder</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>SURFACE_TYPE_PUSH_BUFFERS</span><span style='font-family:
"Calibri","sans-serif";color:#666600'>);</span><span
style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#666600'>}</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#000088'>public</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>void</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> surfaceCreated</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>(</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#660066'>SurfaceHolder</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> holder</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>)</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>{</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#880000'>// surface</span><span style=';color:#880000'>已被创建，现在把预览画面的位置通知摄像头</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>try</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>{</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; mCamera</span><span style='font-family:
"Calibri","sans-serif";color:#666600'>.</span><span
style='font-family:"Calibri","sans-serif";color:black'>setPreviewDisplay</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>(</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>holder</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>);</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; mCamera</span><span style='font-family:
"Calibri","sans-serif";color:#666600'>.</span><span
style='font-family:"Calibri","sans-serif";color:black'>startPreview</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>();</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>}</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>catch</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:#660066'>IOException</span><span style='font-family:"Calibri","sans-serif";
color:black'> e</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>)</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>{</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#660066'>Log</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>d</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:black'>TAG</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>,</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#008800'>&quot;Error setting camera preview: &quot;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>+</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> e</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>.</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>getMessage</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>());</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>}</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#666600'>}</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#000088'>public</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>void</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>
surfaceDestroyed</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:#660066'>SurfaceHolder</span><span style='font-family:"Calibri","sans-serif";
color:black'> holder</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>)</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>{</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#880000'>// </span><span style=';color:#880000'>空代码。注意在</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#880000'>activity</span><span
style=';color:#880000'>中释放摄像头预览对象</span><span
style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp; </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>}</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#000088'>public</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>void</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>
surfaceChanged</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:#660066'>SurfaceHolder</span><span style='font-family:"Calibri","sans-serif";
color:black'> holder</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>,</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>int</span><span style='font-family:"Calibri","sans-serif";
color:black'> format</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>,</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>int</span><span style='font-family:"Calibri","sans-serif";
color:black'> w</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>,</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>int</span><span style='font-family:"Calibri","sans-serif";
color:black'> h</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>)</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>{</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#880000'>// </span><span style=';color:#880000'>如果预览无法更改或旋转，注意此处的事件</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#880000'>// </span><span style=';color:#880000'>确保在缩放或重排时停止预览</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>if</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:black'>mHolder</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>getSurface</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>()</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>==</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>null</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>){</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#880000'>// </span><span style=';color:#880000'>预览</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#880000'>surface</span><span
style=';color:#880000'>不存在</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>return</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>;</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>}</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#880000'>// </span><span style=';color:#880000'>更改时停止预览</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>try</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>{</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; mCamera</span><span style='font-family:
"Calibri","sans-serif";color:#666600'>.</span><span
style='font-family:"Calibri","sans-serif";color:black'>stopPreview</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>();</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>}</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>catch</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:#660066'>Exception</span><span style='font-family:"Calibri","sans-serif";
color:black'> e</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>){</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#880000'>// </span><span style=';color:#880000'>忽略：试图停止不存在的预览</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>}</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#880000'>// </span><span style=';color:#880000'>在此进行缩放、旋转和重新组织格式</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#880000'>// </span><span style=';color:#880000'>以新的设置启动预览</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>try</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>{</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; mCamera</span><span style='font-family:
"Calibri","sans-serif";color:#666600'>.</span><span
style='font-family:"Calibri","sans-serif";color:black'>setPreviewDisplay</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>(</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>mHolder</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>);</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; mCamera</span><span style='font-family:
"Calibri","sans-serif";color:#666600'>.</span><span
style='font-family:"Calibri","sans-serif";color:black'>startPreview</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>();</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>}</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>catch</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:#660066'>Exception</span><span style='font-family:"Calibri","sans-serif";
color:black'> e</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>){</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#660066'>Log</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>d</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:black'>TAG</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>,</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#008800'>&quot;Error starting camera preview: &quot;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>+</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> e</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>.</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>getMessage</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>());</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>}</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#666600'>}</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>}</span></p>

</div>

<p class=MsoNormal align=left style='text-align:left'><b><span
style='font-family:"Calibri","sans-serif";color:#3A3A3A'>&nbsp;</span></b></p>
<p class=MsoNormal align=left style='text-align:left'><a name="preview_layout"><b><span
style=';color:#3A3A3A'>将预览画面置入</span></b></a><b><span
style='font-family:"Calibri","sans-serif";color:#3A3A3A'>layout</span></b></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>上节例程所述的摄像预览类必须被放入一个</span><span
style='font-family:"Calibri","sans-serif"'>activity</span><span
>的</span><span style='font-family:"Calibri","sans-serif"'>layout</span><span
>中，连同其它用户界面控件一起，实现拍照或摄像功能。本节展示了如何为预览创建一个简单的</span><span
lang=EN-US style='font-family:"Calibri","sans-serif"'>layout</span><span
>和</span><span style='font-family:"Calibri","sans-serif"'>activity</span><span
>。</span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>以下</span><span style='font-family:"Calibri","sans-serif"'>layout</span><span
>代码提供了一个非常简单的</span><span style='font-family:
"Calibri","sans-serif"'>view</span><span >，用于显示一个摄像预览画面。在此例中，</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/widget/FrameLayout.html"><span
style='color:#006699'>FrameLayout</span></a></span><span style='font-family:
宋体'>元素用于容纳摄像预览类。利用此类</span><span style='font-family:"Calibri","sans-serif"'>layout</span><span
>，可以把附加的图片信息或控件叠加到实时预览画面上。</span></p>

<div style='border:solid #CCCCCC 1.0pt;padding:8.0pt 8.0pt 8.0pt 8.0pt;
background:#FAFAFA;margin-left:21.0pt;margin-right:0cm'>

<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>&lt;?</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>xml version</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>=</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#008800'>&quot;1.0&quot;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> encoding</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>=</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#008800'>&quot;utf-8&quot;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>?&gt;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>&lt;LinearLayout</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#882288'>xmlns:android</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>=</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#008800'>&quot;http://schemas.android.com/apk/res/android&quot;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#882288'>android:orientation</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>=</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#008800'>&quot;horizontal&quot;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#882288'>android:layout_width</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>=</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#008800'>&quot;fill_parent&quot;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#882288'>android:layout_height</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>=</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#008800'>&quot;fill_parent&quot;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#000088'>&gt;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>&lt;FrameLayout</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#882288'>android:id</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>=</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#008800'>&quot;@+id/camera_preview&quot;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#882288'>android:layout_width</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>=</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#008800'>&quot;fill_parent&quot;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#882288'>android:layout_height</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>=</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#008800'>&quot;fill_parent&quot;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#882288'>android:layout_weight</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>=</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#008800'>&quot;1&quot;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#000088'>/&gt;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>&lt;Button</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#882288'>android:id</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>=</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#008800'>&quot;@+id/button_capture&quot;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#882288'>android:text</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>=</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#008800'>&quot;Capture&quot;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#882288'>android:layout_width</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>=</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#008800'>&quot;wrap_content&quot;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#882288'>android:layout_height</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>=</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#008800'>&quot;wrap_content&quot;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#882288'>android:layout_gravity</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>=</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#008800'>&quot;center&quot;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#000088'>/&gt;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>&lt;/LinearLayout&gt;</span></p>

</div>

<p class=MsoNormal align=left style='text-align:left'><span style='font-family:
宋体'>在大多数设备上，缺省的摄像预览方向是横向的。此例中的</span><span style='font-family:"Calibri","sans-serif"'>layout</span><span
>指定了横向（</span><span style='font-family:"Calibri","sans-serif"'>landscape</span><span
>）布局，下面的代码还把应用程序的方向也改为了横向。为了简化摄像预览画面的刷新，应该在</span><span
lang=EN-US style='font-family:"Calibri","sans-serif"'>manifest</span><span
>中增加如下内容，把应用程序的预览</span><span
style='font-family:"Calibri","sans-serif"'>activity</span><span
>也改为横向显示。</span></p>

<div style='border:solid #CCCCCC 1.0pt;padding:8.0pt 8.0pt 8.0pt 8.0pt;
background:#FAFAFA;margin-left:21.0pt;margin-right:0cm'>

<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>&lt;activity</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#882288'>android:name</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>=</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#008800'>&quot;.CameraActivity&quot;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#882288'>android:label</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>=</span><span style='font-family:"Calibri","sans-serif";
color:#008800'>&quot;@string/app_name&quot;</span><span
style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#882288'>android:screenOrientation</span><span
style='font-family:"Calibri","sans-serif";color:#666600'>=</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#008800'>&quot;landscape&quot;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>&gt;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#880000'>&lt;!-- configure this activity to use landscape orientation
--&gt;</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>&lt;intent-filter&gt;</span><span style='font-family:
"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>&lt;action</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#882288'>android:name</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>=</span><span style='font-family:"Calibri","sans-serif";
color:#008800'>&quot;android.intent.action.MAIN&quot;</span><span
style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>/&gt;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>&lt;category</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#882288'>android:name</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>=</span><span style='font-family:"Calibri","sans-serif";
color:#008800'>&quot;android.intent.category.LAUNCHER&quot;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>/&gt;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#000088'>&lt;/intent-filter&gt;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>&lt;/activity&gt;</span></p>

</div>

<div style='border:none;border-left:solid #99AACC 3.0pt;padding:0cm 0cm 0cm 6.0pt'>

<p class=MsoNormal align=left style='text-align:left;border:none;padding:0cm'><b><span
>注意：</span></b><span style='font-family:"Calibri","sans-serif"'>
</span><span >摄像预览画面并不是一定要横向显示。自</span><span
style='font-family:"Calibri","sans-serif"'>Android 2.2 (API Level 8) </span><span
>开始，可以利用</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html#setDisplayOrientation(int)"><span
style='color:#006699'>setDisplayOrientation()</span></a></span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
>方法来旋转预览画面。为了让预览方向跟随手机方向的变化而改变，可以在预览类的</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/view/SurfaceHolder.Callback.html#surfaceChanged(android.view.SurfaceHolder, int, int, int)"><span
style='color:#006699'>surfaceChanged()</span></a></span><span style='font-family:
宋体'>方法中实现，先用</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html#stopPreview()"><span
style='color:#006699'>Camera.stopPreview()</span></a></span><span
>停止预览，改变方向后再用</span><span style='font-family:
"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html#startPreview()"><span
style='color:#006699'>Camera.startPreview()</span></a></span><span
>开启预览。</span></p>

</div>

<p class=MsoNormal align=left style='text-align:left'><span style='font-family:
宋体'>在摄像</span><span style='font-family:"Calibri","sans-serif"'>view </span><span
>的</span><span style='font-family:"Calibri","sans-serif"'>activity</span><span
>中，请把预览类添加到上述的</span><span style='font-family:
"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/widget/FrameLayout.html"><span
style='color:#006699'>FrameLayout</span></a></span><span style='font-family:
宋体'>元素中。当摄像头暂停使用或者关闭时，摄像</span><span style='font-family:"Calibri","sans-serif"'>activity</span><span
>还必须确保将其释放。以下例子展示了如何修改摄像</span><span
style='font-family:"Calibri","sans-serif"'>activity</span><span
>，加入</span><span style='font-family:"Calibri","sans-serif";
color:#333333'><a href="1.htm#preview"><span style='font-family:
宋体;color:#006699'><span>创建预览类</span></span></a></span><span
>所述的预览类。</span></p>

<div style='border:solid #CCCCCC 1.0pt;padding:8.0pt 8.0pt 8.0pt 8.0pt;
background:#FAFAFA;margin-left:21.0pt;margin-right:0cm'>

<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>public</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>class</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#660066'>CameraActivity</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>extends</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#660066'>Activity</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>{</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#000088'>private</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#660066'>Camera</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> mCamera</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#000088'>private</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#660066'>CameraPreview</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> mPreview</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#006666'>@Override</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#000088'>public</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>void</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> onCreate</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>(</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#660066'>Bundle</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>
savedInstanceState</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>)</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>{</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>super</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>onCreate</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:black'>savedInstanceState</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>);</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; setContentView</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:black'>R</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>layout</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>main</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>);</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#880000'>// </span><span style=';color:#880000'>创建</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#880000'>Camera</span><span
style=';color:#880000'>实例</span><span
style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; mCamera </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>=</span><span style='font-family:"Calibri","sans-serif";
color:black'> getCameraInstance</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>();</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#880000'>// </span><span style=';color:#880000'>创建</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#880000'>Preview
view</span><span style=';color:#880000'>并将其设为</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#880000'>activity</span><span
style=';color:#880000'>中的内容</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; mPreview </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>=</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>new</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#660066'>CameraPreview</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:#000088'>this</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>,</span><span style='font-family:"Calibri","sans-serif";
color:black'> mCamera</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>);</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#660066'>FrameLayout</span><span style='font-family:"Calibri","sans-serif";
color:black'> preview </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>=</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:#660066'>FrameLayout</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>)</span><span style='font-family:"Calibri","sans-serif";
color:black'> findViewById</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:black'>id</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>camera_preview</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>);</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; preview</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>addView</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:black'>mPreview</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>);</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#666600'>}</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>}</span></p>

</div>

<div style='border:none;border-left:solid #99AACC 3.0pt;padding:0cm 0cm 0cm 6.0pt;
margin-left:21.0pt;margin-right:0cm'>

<p class=MsoNormal align=left style='text-align:left;border:none;padding:0cm'><b><span
>注意：</span></b><span >上例中的</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#007000'>getCameraInstance()</span><span
>方法引用了</span><span style='font-family:"Calibri","sans-serif";
color:#333333'><a href="1.htm#access"><span style=';
color:#006699'><span>访问摄像头</span></span></a></span><span
>中的方法示例。</span></p>

</div>

<p class=MsoNormal align=left style='text-align:left'><b><span
style='font-family:"Calibri","sans-serif";color:#3A3A3A'>&nbsp;</span></b></p>
<p class=MsoNormal align=left style='text-align:left'><a name="capture_pic"><b><span
style=';color:#3A3A3A'>捕获图像</span></b></a></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>一旦创建了预览类和显示它的</span><span style='font-family:
"Calibri","sans-serif"'>view layout</span><span >，就可以开始在程序中捕获图片了。必须在程序代码中为用户界面控件设置</span><span
lang=EN-US style='font-family:"Calibri","sans-serif"'>listener</span><span
>，使其可响应用户操作进行拍照。</span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>可以通过</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html#takePicture(android.hardware.Camera.ShutterCallback, android.hardware.Camera.PictureCallback, android.hardware.Camera.PictureCallback)"><span
style='color:#006699'>Camera.takePicture()</span></a></span><span
>方法来获取图片，此方法用到三个参数并从摄像头接收数据。如果要以</span><span
style='font-family:"Calibri","sans-serif"'>JPEG</span><span style='font-family:
宋体'>的格式接收数据，必须实现</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.PictureCallback.html"><span
style='color:#006699'>Camera.PictureCallback</span></a></span><span
>接口，以接收图片数据并写入文件。以下代码展示了</span><span
style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.PictureCallback.html"><span
style='color:#006699'>Camera.PictureCallback</span></a></span><span
>接口的简单例子，实现了从摄像头接收图片并保存。</span></p>

<div style='border:solid #CCCCCC 1.0pt;padding:8.0pt 8.0pt 8.0pt 8.0pt;
background:#FAFAFA;margin-left:21.0pt;margin-right:0cm'>

<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>private</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#660066'>PictureCallback</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> mPicture </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>=</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>new</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#660066'>PictureCallback</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>()</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>{</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#006666'>@Override</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#000088'>public</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>void</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>
onPictureTaken</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:#000088'>byte</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>[]</span><span style='font-family:"Calibri","sans-serif";
color:black'> data</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>,</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#660066'>Camera</span><span style='font-family:"Calibri","sans-serif";
color:black'> camera</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>)</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>{</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#660066'>File</span><span style='font-family:"Calibri","sans-serif";
color:black'> pictureFile </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>=</span><span style='font-family:"Calibri","sans-serif";
color:black'> getOutputMediaFile</span><span style='font-family:
"Calibri","sans-serif";color:#666600'>(</span><span
style='font-family:"Calibri","sans-serif";color:black'>MEDIA_TYPE_IMAGE</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>);</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>if</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:black'>pictureFile </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>==</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>null</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>){</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#660066'>Log</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>d</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:black'>TAG</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>,</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#008800'>&quot;Error creating media file, check storage permissions:
&quot;</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>+</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; e</span><span
style='font-family:"Calibri","sans-serif";color:#666600'>.</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>getMessage</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>());</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>return</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>;</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>}</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>try</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>{</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#660066'>FileOutputStream</span><span style='font-family:"Calibri","sans-serif";
color:black'> fos </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>=</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>new</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#660066'>FileOutputStream</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:black'>pictureFile</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>);</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; fos</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>write</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:black'>data</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>);</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; fos</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>close</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>();</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>}</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>catch</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:#660066'>FileNotFoundException</span><span style='font-family:
"Calibri","sans-serif";color:black'> e</span><span style='font-family:
"Calibri","sans-serif";color:#666600'>)</span><span
style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>{</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#660066'>Log</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>d</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:black'>TAG</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>,</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#008800'>&quot;File not found: &quot;</span><span
style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>+</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> e</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>.</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>getMessage</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>());</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>}</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>catch</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:#660066'>IOException</span><span style='font-family:"Calibri","sans-serif";
color:black'> e</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>)</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>{</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#660066'>Log</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>d</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:black'>TAG</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>,</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#008800'>&quot;Error accessing file: &quot;</span><span
style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>+</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> e</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>.</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>getMessage</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>());</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>}</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#666600'>}</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>};</span></p>

</div>

<p class=MsoNormal align=left style='text-align:left'><span style='font-family:
宋体'>通过调用</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html#takePicture(android.hardware.Camera.ShutterCallback, android.hardware.Camera.PictureCallback, android.hardware.Camera.PictureCallback)"><span
style='color:#006699'>Camera.takePicture()</span></a></span><span
>方法，触发器捕获了一张图片。</span><span style='font-family:"Calibri","sans-serif"'>
</span><span >以下例程展示了如何在按钮</span><span
style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/view/View.OnClickListener.html"><span
style='color:#006699'>View.OnClickListener</span></a></span><span
style=';color:#333333'>的中调用此方法。</span></p>

<div style='border:solid #CCCCCC 1.0pt;padding:8.0pt 8.0pt 8.0pt 8.0pt;
background:#FAFAFA;margin-left:21.0pt;margin-right:0cm'>

<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#880000'>// </span><span
style=';color:#880000'>在</span><span style='font-family:
"Calibri","sans-serif";color:#880000'>Capture</span><span style='font-family:
宋体;color:#880000'>按钮中加入</span><span style='font-family:"Calibri","sans-serif";
color:#880000'>listener</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#660066'>Button</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>
captureButton </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>=</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:#660066'>Button</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>)</span><span style='font-family:"Calibri","sans-serif";
color:black'> findViewById</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:black'>id</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>button_capture</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>);</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
captureButton</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>setOnClickListener</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>new</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#660066'>View</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:#660066'>OnClickListener</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>()</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>{</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#006666'>@Override</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>public</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>void</span><span style='font-family:"Calibri","sans-serif";
color:black'> onClick</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:#660066'>View</span><span style='font-family:"Calibri","sans-serif";
color:black'> v</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>)</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>{</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#880000'>// </span><span style=';color:#880000'>从摄像头获取图片</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; mCamera</span><span style='font-family:
"Calibri","sans-serif";color:#666600'>.</span><span
style='font-family:"Calibri","sans-serif";color:black'>takePicture</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>(</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>null</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>,</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>null</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>,</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> mPicture</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>);</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>}</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#666600'>}</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>);</span></p>

</div>

<div style='border:none;border-left:solid #99AACC 3.0pt;padding:0cm 0cm 0cm 6.0pt;
margin-left:21.0pt;margin-right:0cm'>

<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
border:none;padding:0cm'><b><span >注意：</span></b><span
>下文例程中的</span><span style='font-family:"Calibri","sans-serif";
color:#007000'>mPicture</span><span style='font-family:"Calibri","sans-serif";
color:#333333'> </span><span >成员将会引用上述代码。</span></p>

</div>

<div style='border:none;border-left:solid #FFCF00 3.0pt;padding:0cm 0cm 0cm 6.0pt;
margin-left:21.0pt;margin-right:0cm'>

<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
border:none;padding:0cm'><b><span >警告：</span></b><span
>当应用程序使用完摄像头之后，请记得调用</span><span
style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html#release()"><span
style='color:#006699'>Camera.release()</span></a></span><span style='font-family:
宋体'>释放</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html"><span
style='color:#006699'>Camera</span></a></span><span
style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
>对象！</span><span style='font-family:"Calibri","sans-serif"'>
</span><span >关于如何释放摄像头的详情，请参阅</span><span
style='font-family:"Calibri","sans-serif";color:#333333'><a href="1.htm#release"><span
lang=EN-US style=';color:#006699'><span>释放摄像头</span></span></a></span><span
style=';color:#333333'>。</span></p>

</div>

<p class=MsoNormal align=left style='text-align:left'><b><span
style='font-family:"Calibri","sans-serif";color:#3A3A3A'>&nbsp;</span></b></p>
<p class=MsoNormal align=left style='text-align:left'><a name="capture_video"><b><span
style=';color:#3A3A3A'>捕获视频</span></b></a></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
lang=EN-US style='font-family:"Calibri","sans-serif"'>Android</span><span
>框架的视频捕捉需要对</span><span style='font-family:
"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html"><span
style='color:#006699'>Camera</span></a></span><span >对象进行仔细的管理，还要与</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html"><span
style='color:#006699'>MediaRecorder</span></a></span><span style='font-family:
宋体'>类一起协同工作。使用</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html"><span
style='color:#006699'>Camera</span></a></span><span >录制视频时，必须管理好</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html#lock()"><span
style='color:#006699'>Camera.lock()</span></a></span><span style='font-family:
宋体;color:#333333'>与</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html#unlock()"><span
style='color:#006699'>Camera.unlock()</span></a></span><span style='font-family:
宋体'>的调用，使得</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html"><span
style='color:#006699'>MediaRecorder</span></a></span><span style='font-family:
宋体'>能够顺利访问摄像头硬件，并且还要进行</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html#open()"><span
style='color:#006699'>Camera.open()</span></a></span><span style='font-family:
宋体;color:#333333'>和</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html#release()"><span
style='color:#006699'>Camera.release()</span></a></span><span style='font-family:
宋体'>调用。</span></p>

<div style='border:none;border-left:solid #99AACC 3.0pt;padding:0cm 0cm 0cm 6.0pt;
margin-left:21.0pt;margin-right:0cm'>

<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
border:none;padding:0cm'><b><span >注意：</span></b><span
>自</span><span style='font-family:"Calibri","sans-serif"'>Android
4.0 (API level 14) </span><span >开始，</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html#lock()"><span
style='color:#006699'>Camera.lock()</span></a></span><span
style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
style=';color:#333333'>和</span><span style='font-family:"Calibri","sans-serif";
color:#333333'> </span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html#unlock()"><span
style='color:#006699'>Camera.unlock()</span></a></span><span
style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
>调用由系统自动管理。</span></p>

</div>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>与用摄像头拍照不同，视频捕获必需十分精确地按顺序进行调用。必须按照特定的顺序来执行，应用程序才能成功地准备并捕获视频，详细步骤如下。</span></p>
<p class=MsoNormal align=left style='margin-left:42.1pt;text-align:left;
text-indent:-21.1pt'><span style='font-family:"Calibri","sans-serif";
color:#333333'>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b><span style=';color:#333333'>打开摄像头</span></b><span
style='font-family:"Calibri","sans-serif";color:#333333'> <span>―― </span></span><span
>用</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html#open()"><span
style='color:#006699'>Camera.open()</span></a></span><span
style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
>来获得一个</span><span style='font-family:"Calibri","sans-serif"'>camera</span><span
>对象的实例。</span></p>
<p class=MsoNormal align=left style='margin-left:42.1pt;text-align:left;
text-indent:-21.1pt'><span style='font-family:"Calibri","sans-serif"'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><b><span
>连接预览</span></b><b><span style='font-family:"Calibri","sans-serif"'>
</span></b><span style='font-family:"Calibri","sans-serif"'>―― </span><span
>用</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html#setPreviewDisplay(android.view.SurfaceHolder)"><span
style='color:#006699'>Camera.setPreviewDisplay()</span></a></span><span
>将</span><span style='font-family:"Calibri","sans-serif"'>camera</span><span
>连接到一个</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/view/SurfaceView.html"><span
style='color:#006699'>SurfaceView</span></a></span><span
style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
>，准备实时预览。</span></p>
<p class=MsoNormal align=left style='margin-left:42.1pt;text-align:left;
text-indent:-21.1pt'><span style='font-family:"Calibri","sans-serif";
color:#333333'>3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b><span >开始预览</span></b><b><span
lang=EN-US style='font-family:"Calibri","sans-serif"'> ――</span></b><span
lang=EN-US style='font-family:"Calibri","sans-serif"'> </span><span
>调用</span><span style='font-family:"Calibri","sans-serif";
color:#333333'> </span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html#startPreview()"><span
style='color:#006699'>Camera.startPreview()</span></a></span><span
style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
style=';color:#333333'>开始显示实时摄像画面。</span></p>
<p class=MsoNormal align=left style='margin-left:42.1pt;text-align:left;
text-indent:-21.1pt'><span style='font-family:"Calibri","sans-serif"'>4.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><b><span
>开始录制视频</span></b><b><span style='font-family:
"Calibri","sans-serif"'> ――</span></b><span style='font-family:"Calibri","sans-serif"'>
</span><span >严格<i>按照以下顺序</i>执行才能成功录制视频：</span></p>
<p class=MsoNormal align=left style='margin-left:63.1pt;text-align:left;
text-indent:-21.1pt'><span style='font-family:"Arial","sans-serif";
color:#333333'>a．<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b><span >解锁</span></b><b><span
style='font-family:"Calibri","sans-serif"'>Camera</span></b><span
style='font-family:"Calibri","sans-serif"'> ―― </span><span style='font-family:
宋体'>调用</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html#unlock()"><span
style='color:#006699'>Camera.unlock()</span></a></span><span style='font-family:
宋体'>解锁，便于</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html"><span
style='color:#006699'>MediaRecorder</span></a></span><span
style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
>使用摄像头。</span></p>
<p class=MsoNormal align=left style='margin-left:63.1pt;text-align:left;
text-indent:-21.1pt'><span style='font-family:"Arial","sans-serif";
color:#333333'>b．<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b><span >配置</span></b><b><span
style='font-family:"Calibri","sans-serif"'>MediaRecorder</span></b><span
lang=EN-US style='font-family:"Calibri","sans-serif"'> ―― </span><i><span
>按照如下顺序</span></i><span >调用</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html"><span
style='color:#006699'>MediaRecorder</span></a></span><span
style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
>中的方法。详情请参阅</span><span style='font-family:
"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html"><span
style='color:#006699'>MediaRecorder</span></a></span><span
style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
>参考文档。</span></p>
<p class=MsoNormal align=left style='margin-left:84.0pt;text-align:left;
text-indent:-21.0pt'><span style='font-family:"Calibri","sans-serif";
color:#333333'>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html#setCamera(android.hardware.Camera)"><span
style='color:#006699'>setCamera()</span></a></span><span
style='font-family:"Calibri","sans-serif";color:#333333'> ―― </span><span
style=';color:#333333'>用当前</span><span
style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html"><span
style='color:#006699'>Camera</span></a></span><span style=';
color:#333333'>实例将摄像头用途设置为视频捕捉。</span></p>
<p class=MsoNormal align=left style='margin-left:84.0pt;text-align:left;
text-indent:-21.0pt'><span style='font-family:"Calibri","sans-serif";
color:#333333'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html#setAudioSource(int)"><span
style='color:#006699'>setAudioSource()</span></a></span><span
style='font-family:"Calibri","sans-serif";color:#333333'> ―― </span><span
style=';color:#333333'>用</span><span style='font-family:
"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.AudioSource.html#CAMCORDER"><span
style='color:#006699'>MediaRecorder.AudioSource.CAMCORDER</span></a></span><span
style=';color:#333333'>设置音频源。</span></p>
<p class=MsoNormal align=left style='margin-left:84.0pt;text-align:left;
text-indent:-21.0pt'><span style='font-family:"Calibri","sans-serif";
color:#333333'>3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html#setVideoSource(int)"><span
style='color:#006699'>setVideoSource()</span></a></span><span
style='font-family:"Calibri","sans-serif";color:#333333'> ―― </span><span
style=';color:#333333'>用</span><span style='font-family:
"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.VideoSource.html#CAMERA"><span
style='color:#006699'>MediaRecorder.VideoSource.CAMERA</span></a></span><span
style=';color:#333333'>设置视频源。</span></p>
<p class=MsoNormal align=left style='margin-left:84.0pt;text-align:left;
text-indent:-21.0pt'><span style='font-family:"Calibri","sans-serif";
color:#333333'>4.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span><span
>设置视频输出格式和编码格式。<span style='color:#333333'>对</span>于</span><span
lang=EN-US style='font-family:"Calibri","sans-serif"'>Android 2.2 (API Level 8)
</span><span >以上版本<span style='color:#333333'>，</span>使用</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html#setProfile(android.media.CamcorderProfile)"><span
style='color:#006699'>MediaRecorder.setProfile</span></a></span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
>方法，并用</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/CamcorderProfile.html#get(int)"><span
style='color:#006699'>CamcorderProfile.get()</span></a></span><span
>来获取一个</span><span style='font-family:"Calibri","sans-serif"'>profile</span><span
>实例。对于</span><span style='font-family:"Calibri","sans-serif"'>Android
prior to 2.2</span><span >以上版本，必须设置视频输出格式和编码参数：</span></p>
<p class=MsoNormal align=left style='margin-left:105.0pt;text-align:left;
text-indent:-21.0pt'><span style='font-family:"Arial","sans-serif";
color:#333333'>i.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html#setOutputFormat(int)"><span
style='color:#006699'>setOutputFormat()</span></a></span><span
style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
lang=EN-US >――</span><span style='font-family:
"Calibri","sans-serif"'> </span><span >设置输出格式，指定缺省设置或</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.OutputFormat.html#MPEG_4"><span
style='color:#006699'>MediaRecorder.OutputFormat.MPEG_4</span></a></span><span
style=';color:#333333'>。</span></p>
<p class=MsoNormal align=left style='margin-left:105.0pt;text-align:left;
text-indent:-21.0pt'><span style='font-family:"Arial","sans-serif";
color:#333333'>ii.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html#setAudioEncoder(int)"><span
style='color:#006699'>setAudioEncoder()</span></a></span><span
style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
lang=EN-US >――</span><span style='font-family:
"Calibri","sans-serif"'> </span><span >设置声音编码类型。指定缺省设置或</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.AudioEncoder.html#AMR_NB"><span
style='color:#006699'>MediaRecorder.AudioEncoder.AMR_NB</span></a></span><span
style=';color:#333333'>。</span></p>
<p class=MsoNormal align=left style='margin-left:105.0pt;text-align:left;
text-indent:-21.0pt'><span style='font-family:"Arial","sans-serif";
color:#333333'>iii.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html#setVideoEncoder(int)"><span
style='color:#006699'>setVideoEncoder()</span></a></span><span
style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
lang=EN-US >――</span><span style='font-family:
"Calibri","sans-serif"'> </span><span >设置视频编码类型，指定缺省设置或者</span><span
style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.VideoEncoder.html#MPEG_4_SP"><span
style='color:#006699'>MediaRecorder.VideoEncoder.MPEG_4_SP</span></a></span><span
style=';color:#333333'>。</span></p>
<p class=MsoNormal align=left style='margin-left:84.0pt;text-align:left;
text-indent:-21.0pt'><span style='font-family:"Calibri","sans-serif";
color:#333333'>5.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html#setOutputFile(java.lang.String)"><span
style='color:#006699'>setOutputFile()</span></a></span><span
style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
lang=EN-US >――</span><span style='font-family:
"Calibri","sans-serif"'> </span><span >用</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#007000'>getOutputMediaFile(MEDIA_TYPE_VIDEO).toString()</span><span
>设置输出文件，见</span><span style='font-family:"Calibri","sans-serif";
color:#333333'><a target="_blank" href="http://developer.android.com/guide/topics/media/camera.html#saving-media#saving-media"><span
lang=EN-US style=';color:#006699'><span>保存媒体文件</span></span></a></span><span
>一节中的方法示例。</span></p>
<p class=MsoNormal align=left style='margin-left:84.0pt;text-align:left;
text-indent:-21.0pt'><span style='font-family:"Calibri","sans-serif";
color:#333333'>6.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp; </span></span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html#setPreviewDisplay(android.view.Surface)"><span
style='color:#006699'>setPreviewDisplay()</span></a></span><span
style='font-family:"Calibri","sans-serif";color:#333333'> ―― </span><span
>用上面<b><span style='color:#333333'>连接预览</span></b>中设置的对象来指定应用程序的</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/view/SurfaceView.html"><span
style='color:#006699'>SurfaceView</span></a></span><span
style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
>预览</span><span style='font-family:"Calibri","sans-serif"'>layout</span><span
>元素。</span></p>

<div style='border:none;border-left:solid #FFCF00 3.0pt;padding:0cm 0cm 0cm 6.0pt;
margin-left:63.0pt;margin-right:0cm'>

<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
border:none;padding:0cm'><b><span style=';color:#333333'>警告：</span></b><span
style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
>必须<i><span style='color:#333333'>按照如下顺序</span></i>调用</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html"><span
style='color:#006699'>MediaRecorder</span></a></span><span style='font-family:
宋体'>的下列配置方法，否则应用程序将会引发错误，录像也将失败。</span></p>

</div>

<p class=MsoNormal align=left style='margin-left:63.1pt;text-align:left;
text-indent:-21.1pt'><span style='font-family:"Arial","sans-serif";
color:#333333'>c．<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b><span style=';color:#333333'>准备</span></b><b><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'>MediaRecorder</span></b><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'> ―― </span><span
>调用</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html#prepare()"><span
style='color:#006699'>MediaRecorder.prepare()</span></a></span><span
>设置配置，准备好</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html"><span
style='color:#006699'>MediaRecorder</span></a></span><span
style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
style=';color:#333333'>。</span></p>
<p class=MsoNormal align=left style='margin-left:63.1pt;text-align:left;
text-indent:-21.1pt'><span style='font-family:"Arial","sans-serif";
color:#333333'>d．<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b><span style=';color:#333333'>启动</span></b><b><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'>MediaRecorder</span></b><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'> ―― </span><span
>调用</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html#start()"><span
style='color:#006699'>MediaRecorder.start()</span></a></span><span
>开始录制视频。</span></p>
<p class=MsoNormal align=left style='margin-left:42.1pt;text-align:left;
text-indent:-21.1pt'><span style='font-family:"Calibri","sans-serif";
color:#333333'>5.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b><span style=';color:#333333'>停止录制视频</span></b><b><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'> ――</span></b><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'> </span><i><span
style=';color:#333333'>按照顺序</span></i><span style='font-family:
宋体'>调用以下方法，才能成功完成视频录制：</span></p>
<p class=MsoNormal align=left style='margin-left:63.1pt;text-align:left;
text-indent:-21.1pt'><span style='font-family:"Arial","sans-serif";
color:#333333'>a．<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b><span style=';color:#333333'>停止</span></b><b><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'>MediaRecorder</span></b><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'> ―― </span><span
style=';color:#333333'>调用</span><span
style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html#stop()"><span
style='color:#006699'>MediaRecorder.stop()</span></a></span><span
>停止录制视频。</span></p>
<p class=MsoNormal align=left style='margin-left:63.1pt;text-align:left;
text-indent:-21.1pt'><span style='font-family:"Arial","sans-serif";
color:#333333'>b．<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b><span style=';color:#333333'>重置</span></b><b><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'>MediaRecorder</span></b><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'> ―― </span><span
>这是可选步骤，调用</span><span style='font-family:
"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html#reset()"><span
style='color:#006699'>MediaRecorder.reset()</span></a></span><span
style=';color:#333333'>删</span><span >除</span><span
lang=EN-US style='font-family:"Calibri","sans-serif"'>recorder</span><span
>中的配置信息。</span></p>
<p class=MsoNormal align=left style='margin-left:63.1pt;text-align:left;
text-indent:-21.1pt'><span style='font-family:"Arial","sans-serif";
color:#333333'>c．<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b><span style=';color:#333333'>释放</span></b><b><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'>MediaRecorder</span></b><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'> ―― </span><span
style=';color:#333333'>调用</span><span
style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html#release()"><span
style='color:#006699'>MediaRecorder.release()</span></a></span><span
style=';color:#333333'>释放</span><span
style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html"><span
style='color:#006699'>MediaRecorder</span></a></span><span style='font-family:
宋体;color:#333333'>。</span></p>
<p class=MsoNormal align=left style='margin-left:63.1pt;text-align:left;
text-indent:-21.1pt'><span style='font-family:"Arial","sans-serif"'>d．<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b><span style=';color:#333333'>锁定摄像头</span></b><span
style='font-family:"Calibri","sans-serif";color:#333333'> <span>―― </span></span><span
style=';color:#333333'>用</span><span style='font-family:
"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html#lock()"><span
style='color:#006699'>Camera.lock()</span></a></span><span style='font-family:
宋体;color:#333333'>锁定摄像头，使得以后</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html"><span
style='color:#006699'>MediaRecorder</span></a></span><span
style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif"'>session</span><span
>能够使用它。自</span><span style='font-family:"Calibri","sans-serif"'>Android
4.0 (API level 14)</span><span >开始，不再需要本调用了，除非</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html#prepare()"><span
style='color:#006699'>MediaRecorder.prepare()</span></a></span><span
>调用失败。</span></p>
<p class=MsoNormal align=left style='margin-left:42.1pt;text-align:left;
text-indent:-21.1pt'><span style='font-family:"Calibri","sans-serif"'>6.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><b><span
style=';color:#333333'>停止预览</span></b><b><span
style='font-family:"Calibri","sans-serif";color:#333333'> ――</span></b><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif"'>activity</span><span
>使用完摄像头后，应用</span><span style='font-family:
"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html#stopPreview()"><span
style='color:#006699'>Camera.stopPreview()</span></a></span><span
style=';color:#333333'>停</span><span >止预览。</span></p>
<p class=MsoNormal align=left style='margin-left:42.1pt;text-align:left;
text-indent:-21.1pt'><span style='font-family:"Calibri","sans-serif";
color:#333333'>7.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b><span style=';color:#333333'>释放摄像头</span></b><span
style='font-family:"Calibri","sans-serif";color:#333333'> <span>―― </span></span><span
>使用</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html#release()"><span
style='color:#006699'>Camera.release()</span></a></span><span style='font-family:
宋体;color:#333333'>释</span><span >放摄像头，使其它应用程序可以使用它。</span></p>

<div style='border:none;border-left:solid #99AACC 3.0pt;padding:0cm 0cm 0cm 6.0pt;
margin-left:21.0pt;margin-right:0cm'>

<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
border:none;padding:0cm'><b><span style=';color:#333333'>注意：</span></b><span
style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
>也可以不必先创建摄像头预览就使用</span><span
style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html"><span
style='color:#006699'>MediaRecorder</span></a></span><span style='font-family:
宋体;color:#333333'>，</span><span >并跳过本节开始的几步。不过，因为用户一般都希望在开始录像前看到预览画面，这里就不讨论那类过程了。</span></p>

</div>

<p class=MsoNormal align=left style='text-align:left'><b><span
style='font-family:"Calibri","sans-serif";color:#3A3A3A'>&nbsp;</span></b></p>
<p class=MsoNormal align=left style='text-align:left'><a
name="config_MediaRecorder"><b><span style=';color:#3A3A3A'>配置</span></b></a><b><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#3A3A3A'>MediaRecorder</span></b></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
style=';color:#333333'>在使用</span><span style='font-family:"Calibri","sans-serif";
color:#333333'> </span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html"><span
style='color:#006699'>MediaRecorder</span></a></span><span
style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
style=';color:#333333'>类进行录像时，必须先</span><i><span
>按照特定顺序</span></i><span style=';color:#333333'>进行配置，然后调用</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html#prepare()"><span
style='color:#006699'>MediaRecorder.prepare()</span></a></span><span
style=';color:#333333'>方法检查并执行这些配置。以下例程演示了如何为录像正确配置并准备</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html"><span
style='color:#006699'>MediaRecorder</span></a></span><span
style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
style=';color:#333333'>类。</span></p>

<div style='border:solid #CCCCCC 1.0pt;padding:8.0pt 8.0pt 8.0pt 8.0pt;
background:#FAFAFA;margin-left:21.0pt;margin-right:0cm'>

<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>private</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>boolean</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>
prepareVideoRecorder</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(){</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
mCamera </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>=</span><span style='font-family:"Calibri","sans-serif";
color:black'> getCameraInstance</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>();</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
mMediaRecorder </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>=</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>new</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#660066'>MediaRecorder</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>();</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#880000'>//
</span><span style=';color:#880000'>第</span><span
style='font-family:"Calibri","sans-serif";color:#880000'>1</span><span
style=';color:#880000'>步：解锁并将摄像头指向</span><span
style='font-family:"Calibri","sans-serif";color:#880000'>MediaRecorder</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
mCamera</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>unlock</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>();</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
mMediaRecorder</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>setCamera</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:black'>mCamera</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>);</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#880000'>//
</span><span style=';color:#880000'>第</span><span
style='font-family:"Calibri","sans-serif";color:#880000'>2</span><span
style=';color:#880000'>步：指定源</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
mMediaRecorder</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>setAudioSource</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:#660066'>MediaRecorder</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:#660066'>AudioSource</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>CAMCORDER</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>);</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
mMediaRecorder</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>setVideoSource</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:#660066'>MediaRecorder</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:#660066'>VideoSource</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>CAMERA</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>);</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#880000'>//
</span><span style=';color:#880000'>第</span><span
style='font-family:"Calibri","sans-serif";color:#880000'>3</span><span
style=';color:#880000'>步：指定</span><span
style='font-family:"Calibri","sans-serif";color:#880000'>CamcorderProfile</span><span
style=';color:#880000'>（需要</span><span
style='font-family:"Calibri","sans-serif";color:#880000'>API Level 8</span><span
style=';color:#880000'>以上版本）</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
mMediaRecorder</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>setProfile</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:#660066'>CamcorderProfile</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:#000088'>get</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:#660066'>CamcorderProfile</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>QUALITY_HIGH</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>));</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#880000'>//
</span><span style=';color:#880000'>第</span><span
style='font-family:"Calibri","sans-serif";color:#880000'>4</span><span
style=';color:#880000'>步：指定输出文件</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
mMediaRecorder</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>setOutputFile</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:black'>getOutputMediaFile</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:black'>MEDIA_TYPE_VIDEO</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>).</span><span style='font-family:"Calibri","sans-serif";
color:black'>toString</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>());</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#880000'>//
</span><span style=';color:#880000'>第</span><span
style='font-family:"Calibri","sans-serif";color:#880000'>5</span><span
style=';color:#880000'>步：指定预览输出</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
mMediaRecorder</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>setPreviewDisplay</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:black'>mPreview</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>getHolder</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>().</span><span style='font-family:"Calibri","sans-serif";
color:black'>getSurface</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>());</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#880000'>//
</span><span style=';color:#880000'>第</span><span
style='font-family:"Calibri","sans-serif";color:#880000'>6</span><span
style=';color:#880000'>步：根据以上配置准备</span><span
style='font-family:"Calibri","sans-serif";color:#880000'>MediaRecorder</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#000088'>try</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>{</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; mMediaRecorder</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>prepare</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>();</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#666600'>}</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>catch</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>(</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#660066'>IllegalStateException</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> e</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>)</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>{</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#660066'>Log</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>d</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:black'>TAG</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>,</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#008800'>&quot;IllegalStateException preparing MediaRecorder: &quot;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>+</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> e</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>.</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>getMessage</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>());</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; releaseMediaRecorder</span><span style='font-family:
"Calibri","sans-serif";color:#666600'>();</span><span
style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>return</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>false</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>;</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#666600'>}</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>catch</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>(</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#660066'>IOException</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> e</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>)</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>{</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#660066'>Log</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>d</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:black'>TAG</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>,</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#008800'>&quot;IOException preparing MediaRecorder: &quot;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>+</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> e</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>.</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>getMessage</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>());</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; releaseMediaRecorder</span><span style='font-family:
"Calibri","sans-serif";color:#666600'>();</span><span
style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>return</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>false</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>;</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#666600'>}</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#000088'>return</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>true</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>}</span></p>

</div>

<p class=MsoNormal align=left style='text-align:left'><span style='font-family:
宋体'>如果是</span><span style='font-family:"Calibri","sans-serif"'>Android
2.2 (API Level 8) </span><span >之前的版本，则必须直接指定输出格式和编码格式，而不是使用</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/CamcorderProfile.html"><span
style='color:#006699'>CamcorderProfile</span></a></span><span style='font-family:
宋体;color:#333333'>。</span><span >以下代码演示了这种方式：</span></p>

<div style='border:solid #CCCCCC 1.0pt;padding:8.0pt 8.0pt 8.0pt 8.0pt;
background:#FAFAFA;margin-left:21.0pt;margin-right:0cm'>

<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#880000'>//
</span><span style=';color:#880000'>第</span><span
style='font-family:"Calibri","sans-serif";color:#880000'>3</span><span
style=';color:#880000'>步：设置输出格式和编码格式（针对低于</span><span
style='font-family:"Calibri","sans-serif";color:#880000'>API Level 8</span><span
style=';color:#880000'>版本）</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
mMediaRecorder</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>setOutputFormat</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:#660066'>MediaRecorder</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:#660066'>OutputFormat</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>MPEG_4</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>);</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
mMediaRecorder</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>setAudioEncoder</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:#660066'>MediaRecorder</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:#660066'>AudioEncoder</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>DEFAULT</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>);</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
mMediaRecorder</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>setVideoEncoder</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:#660066'>MediaRecorder</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:#660066'>VideoEncoder</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>DEFAULT</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>);</span></p>

</div>

<p class=MsoNormal align=left style='text-align:left'><span
style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html"><span
style='color:#006699'>MediaRecorder</span></a></span><span style='font-family:
宋体'>中以下有关视频录制的参数都给出了缺省值，当然也可以在应用程序中修改这些设置：</span></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
text-indent:0cm'><span style='font-size:10.0pt;font-family:Symbol;
color:#333333'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html#setVideoEncodingBitRate(int)"><span
style='color:#006699'>setVideoEncodingBitRate()</span></a></span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'> </span></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
text-indent:0cm'><span style='font-size:10.0pt;font-family:Symbol;
color:#333333'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html#setVideoSize(int, int)"><span
style='color:#006699'>setVideoSize()</span></a></span><span
style='font-family:"Calibri","sans-serif";color:#333333'> </span></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
text-indent:0cm'><span style='font-size:10.0pt;font-family:Symbol;
color:#333333'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html#setVideoFrameRate(int)"><span
style='color:#006699'>setVideoFrameRate()</span></a></span><span
style='font-family:"Calibri","sans-serif";color:#333333'> </span></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
text-indent:0cm'><span style='font-size:10.0pt;font-family:Symbol;
color:#333333'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html#setAudioEncodingBitRate(int)"><span
style='color:#006699'>setAudioEncodingBitRate()</span></a></span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'> </span></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
text-indent:0cm'><span style='font-size:10.0pt;font-family:Symbol;
color:#333333'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html#setAudioChannels(int)"><span
style='color:#006699'>setAudioChannels()</span></a></span><span
style='font-family:"Calibri","sans-serif";color:#333333'> </span></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
text-indent:0cm'><span style='font-size:10.0pt;font-family:Symbol;
color:#333333'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html#setAudioSamplingRate(int)"><span
style='color:#006699'>setAudioSamplingRate()</span></a></span><span
style='font-family:"Calibri","sans-serif";color:#333333'> </span></p>
<p class=MsoNormal align=left style='text-align:left'><b><span
style='font-family:"Calibri","sans-serif";color:#3A3A3A'>&nbsp;</span></b></p>
<p class=MsoNormal align=left style='text-align:left'><b><span
style=';color:#3A3A3A'>开始和停止</span></b><b><span
style='font-family:"Calibri","sans-serif";color:#3A3A3A'>MediaRecorder</span></b></p>
<p class=MsoNormal align=left style='text-align:left'><span style='font-family:
宋体'>使用</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html"><span
style='color:#006699'>MediaRecorder</span></a></span><span style='font-family:
宋体'>类开始和停止视频录制时，必须遵循以下特定顺序。</span></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
text-indent:0cm'><span style='font-family:"Calibri","sans-serif"'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
>用</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html#unlock()"><span
style='color:#006699'>Camera.unlock()</span></a></span><span style='font-family:
宋体'>解锁摄像头</span></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
text-indent:0cm'><span style='font-family:"Calibri","sans-serif";
color:#333333'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style=';color:#333333'>如</span><span
>上代码所示配置</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html"><span
style='color:#006699'>MediaRecorder</span></a></span><span
style='font-family:"Calibri","sans-serif";color:#333333'> </span></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
text-indent:0cm'><span style='font-family:"Calibri","sans-serif";
color:#333333'>3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span >用</span><span
style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html#start()"><span
style='color:#006699'>MediaRecorder.start()</span></a></span><span
>开始录制</span><span style='font-family:"Calibri","sans-serif"'>
</span></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
text-indent:0cm'><span style='font-family:"Calibri","sans-serif";
color:#333333'>4.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span >记录视频</span><span
style='font-family:"Calibri","sans-serif";color:#333333'> </span></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
text-indent:0cm'><span style='font-family:"Calibri","sans-serif";
color:#333333'>5.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span >用</span><span
style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html#stop()"><span
style='color:#006699'>MediaRecorder.stop()</span></a></span><span
>停止录制</span><span style='font-family:"Calibri","sans-serif";
color:#333333'> </span></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
text-indent:0cm'><span style='font-family:"Calibri","sans-serif"'>6.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
>用</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html#release()"><span
style='color:#006699'>MediaRecorder.release()</span></a></span><span
>释放</span><span style='font-family:"Calibri","sans-serif"'>media
recorder</span></p>
<p class=MsoNormal align=left style='margin-left:21.0pt;text-align:left;
text-indent:0cm'><span style='font-family:"Calibri","sans-serif";
color:#333333'>7.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span >用</span><span
style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html#lock()"><span
style='color:#006699'>Camera.lock()</span></a></span><span style='font-family:
宋体'>锁定摄像头</span><span style='font-family:"Calibri","sans-serif"'> </span></p>
<p class=MsoNormal align=left style='text-align:left'><span style='font-family:
宋体'>以下例程演示了如何触发按钮并用</span><span style='font-family:"Calibri","sans-serif"'>camera</span><span
>和</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html"><span
style='color:#006699'>MediaRecorder</span></a></span><span style='font-family:
宋体'>类正确地开始和停止视频录制。</span></p>

<div style='border:none;border-left:solid #99AACC 3.0pt;padding:0cm 0cm 0cm 6.0pt;
margin-left:21.0pt;margin-right:0cm'>

<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
border:none;padding:0cm'><b><span >注意：</span></b><span
style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
>视频录制完毕后请不要释放</span><span style='font-family:
"Calibri","sans-serif"'>camera</span><span >，否则预览将会停止。</span></p>

</div>

<div style='border:solid #CCCCCC 1.0pt;padding:8.0pt 8.0pt 8.0pt 8.0pt;
background:#FAFAFA;margin-left:21.0pt;margin-right:0cm'>

<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>private</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>boolean</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> isRecording </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>=</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>false</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#880000'>// </span><span
style=';color:#880000'>为</span><span style='font-family:
"Calibri","sans-serif";color:#880000'>Capture</span><span style='font-family:
宋体;color:#880000'>按钮加入</span><span style='font-family:"Calibri","sans-serif";
color:#880000'>listener</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#660066'>Button</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>
captureButton </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>=</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:#660066'>Button</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>)</span><span style='font-family:"Calibri","sans-serif";
color:black'> findViewById</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:black'>id</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>button_capture</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>);</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>captureButton</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>.</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>setOnClickListener</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>(</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#000088'>new</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#660066'>View</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>.</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#660066'>OnClickListener</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>()</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>{</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#006666'>@Override</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>public</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>void</span><span style='font-family:"Calibri","sans-serif";
color:black'> onClick</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:#660066'>View</span><span style='font-family:"Calibri","sans-serif";
color:black'> v</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>)</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>{</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>if</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:black'>isRecording</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>)</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>{</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span
style='font-family:"Calibri","sans-serif";color:#880000'>// </span><span
style=';color:#880000'>停止录像并释放</span><span
style='font-family:"Calibri","sans-serif";color:#880000'>camera</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mMediaRecorder</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>.</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>stop</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>();</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> &nbsp;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#880000'>// </span><span
style=';color:#880000'>停止录像</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; releaseMediaRecorder</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>();</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#880000'>// </span><span
style=';color:#880000'>释放</span><span
style='font-family:"Calibri","sans-serif";color:#880000'>MediaRecorder</span><span
style=';color:#880000'>对象</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mCamera</span><span
style='font-family:"Calibri","sans-serif";color:#666600'>.</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>lock</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>();</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> &nbsp;
&nbsp; &nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#880000'>// </span><span style=';color:#880000'>将控制权从</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#880000'>MediaRecorder</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span><span
style=';color:#880000'>交回</span><span
style='font-family:"Calibri","sans-serif";color:#880000'>camera</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span
style='font-family:"Calibri","sans-serif";color:#880000'>// </span><span
style=';color:#880000'>通知用户录像已停止</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setCaptureButtonText</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>(</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#008800'>&quot;Capture&quot;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>);</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; isRecording </span><span
style='font-family:"Calibri","sans-serif";color:#666600'>=</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>false</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>}</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>else</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>{</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span
style='font-family:"Calibri","sans-serif";color:#880000'>// </span><span
style=';color:#880000'>初始化视频</span><span
style='font-family:"Calibri","sans-serif";color:#880000'>camera</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span
style='font-family:"Calibri","sans-serif";color:#000088'>if</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>(</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>prepareVideoRecorder</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>())</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>{</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#880000'>// Camera</span><span
style=';color:#880000'>已可用并解锁，</span><span
style='font-family:"Calibri","sans-serif";color:#880000'>MediaRecorder</span><span
style=';color:#880000'>已就绪</span><span
style='font-family:"Calibri","sans-serif";color:#880000'>,</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#880000'>// </span><span
style=';color:#880000'>现在可以开始录像</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; mMediaRecorder</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>.</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>start</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>();</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#880000'>// </span><span
style=';color:#880000'>通知用户录像已开始</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; setCaptureButtonText</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>(</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#008800'>&quot;Stop&quot;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>);</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; isRecording </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>=</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>true</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span
style='font-family:"Calibri","sans-serif";color:#666600'>}</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>else</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>{</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#880000'>// </span><span
style=';color:#880000'>准备未能完成，释放</span><span
style='font-family:"Calibri","sans-serif";color:#880000'>camera</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; releaseMediaRecorder</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>();</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#880000'>// </span><span
style=';color:#880000'>通知用户</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span
style='font-family:"Calibri","sans-serif";color:#666600'>}</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>}</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>}</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#666600'>}</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>);</span></p>

</div>

<div style='border:none;border-left:solid #99AACC 3.0pt;padding:0cm 0cm 0cm 6.0pt;
margin-left:21.0pt;margin-right:0cm'>

<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
border:none;padding:0cm'><b><span style=';color:#333333'>注意：</span></b><span
style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
>在上例中，</span><span style='font-family:"Calibri","sans-serif";
color:#007000'>prepareVideoRecorder()</span><span style='font-family:
"Calibri","sans-serif";color:#333333'> </span><span >方法引用了</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'><a
href="1.htm#config_MediaRecorder"><span style=';
color:#006699'><span>配置</span></span><span style='color:#006699'>MediaRecorder</span></a></span><span
style=';color:#333333'>。</span><span >中的示例代码。此方法实现了锁定</span><span
lang=EN-US style='font-family:"Calibri","sans-serif"'>camera</span><span
>、配置和准备</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/media/MediaRecorder.html"><span
style='color:#006699'>MediaRecorder</span></a></span><span
style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
>实例。</span></p>

</div>

<p class=MsoNormal align=left style='text-align:left'><b><span
style='font-family:"Calibri","sans-serif";color:#3A3A3A'>&nbsp;</span></b></p>
<p class=MsoNormal align=left style='text-align:left'><a name=release><b><span
style='font-size:12.0pt;;color:#3A3A3A'>释放摄像头</span></b></a></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>摄像头是设备上所有应用程序共享使用的资源。应用程序可以在获得</span><span
style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html"><span
style='color:#006699'>Camera</span></a></span><span >实例后使用摄像头，停止使用后请务必注意释放摄像头对象，应用程序暂停时<span
style='color:#333333'>（</span></span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/app/Activity.html#onPause()"><span
style='color:#006699'>Activity.onPause()</span></a></span><span
>）也是如此。如果某应用程序未能正确地释放摄像头，则所有后续访问摄像头的尝试（包括该应用程序自身）都将会失败，并可能导致应用程序被强行关闭。</span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>用</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html#release()"><span
style='color:#006699'>Camera.release()</span></a></span><span style='font-family:
宋体'>方法可以释放</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/hardware/Camera.html"><span
style='color:#006699'>Camera</span></a></span><span >对象的实例，代码示例如下。</span></p>

<div style='border:solid #CCCCCC 1.0pt;padding:8.0pt 8.0pt 8.0pt 8.0pt;
background:#FAFAFA;margin-left:21.0pt;margin-right:0cm'>

<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>public</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>class</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#660066'>CameraActivity</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>extends</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#660066'>Activity</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>{</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#000088'>private</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#660066'>Camera</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> mCamera</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#000088'>private</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#660066'>SurfaceView</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> mPreview</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#000088'>private</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#660066'>MediaRecorder</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>
mMediaRecorder</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>;</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#666600'>...</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#006666'>@Override</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#000088'>protected</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>void</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> onPause</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>()</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>{</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>super</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>onPause</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>();</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; releaseMediaRecorder</span><span style='font-family:
"Calibri","sans-serif";color:#666600'>();</span><span
style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#880000'>// </span><span
style=';color:#880000'>如果正在使用</span><span
style='font-family:"Calibri","sans-serif";color:#880000'>MediaRecorder</span><span
style=';color:#880000'>，首先需要释放它。</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; releaseCamera</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>();</span><span style='font-family:"Calibri","sans-serif";
color:black'> &nbsp; &nbsp; &nbsp; &nbsp; </span><span
style='font-family:"Calibri","sans-serif";color:#880000'>// </span><span
style=';color:#880000'>在暂停事件中立即释放摄像头</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#666600'>}</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#000088'>private</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>void</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>
releaseMediaRecorder</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(){</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>if</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:black'>mMediaRecorder </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>!=</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>null</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>)</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>{</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; mMediaRecorder</span><span
style='font-family:"Calibri","sans-serif";color:#666600'>.</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>reset</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>();</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> &nbsp; </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#880000'>// </span><span
style=';color:#880000'>清除</span><span
style='font-family:"Calibri","sans-serif";color:#880000'>recorder</span><span
style=';color:#880000'>配置</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; mMediaRecorder</span><span
style='font-family:"Calibri","sans-serif";color:#666600'>.</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>release</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>();</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#880000'>// </span><span
style=';color:#880000'>释放</span><span
style='font-family:"Calibri","sans-serif";color:#880000'>recorder</span><span
style=';color:#880000'>对象</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; mMediaRecorder </span><span
style='font-family:"Calibri","sans-serif";color:#666600'>=</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>null</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; mCamera</span><span style='font-family:
"Calibri","sans-serif";color:#666600'>.</span><span
style='font-family:"Calibri","sans-serif";color:#000088'>lock</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>();</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#880000'>// </span><span style=';color:#880000'>为后续使用锁定摄像头</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>}</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#666600'>}</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#000088'>private</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>void</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>
releaseCamera</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(){</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>if</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:black'>mCamera </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>!=</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>null</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>){</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; mCamera</span><span style='font-family:
"Calibri","sans-serif";color:#666600'>.</span><span
style='font-family:"Calibri","sans-serif";color:black'>release</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>();</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> &nbsp;
&nbsp; &nbsp; &nbsp;</span><span style='font-family:"Calibri","sans-serif";
color:#880000'>// </span><span style=';color:#880000'>为其它应用释放摄像头</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; mCamera </span><span style='font-family:
"Calibri","sans-serif";color:#666600'>=</span><span
style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>null</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>}</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#666600'>}</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>}</span></p>

</div>

<div style='border:none;border-left:solid #FFCF00 3.0pt;padding:0cm 0cm 0cm 6.0pt;
margin-left:21.0pt;margin-right:0cm'>

<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
border:none;padding:0cm'><b><span style=';color:#333333'>警告：</span></b><span
>如果某应用程序未能正确释放摄像头，所有后续访问摄像头的尝试（包括该应用程序自身）都将会失败，并可能会导致应用程序被强行关闭。</span></p>

</div>

<p class=MsoNormal align=left style='text-align:left'><span
style='font-family:"Calibri","sans-serif";color:#333333'>&nbsp;</span></p>
<p class=MsoNormal align=left style='text-align:left'><span
style='font-family:"Calibri","sans-serif";color:#333333'>&nbsp;</span></p>
<p class=MsoNormal align=center style='text-align:center'><b><span
style='font-size:12.0pt;;color:#333333'>保存媒体文件</span></b></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
style=';color:#333333'>诸如图片和视频这些由用户创建的媒体文件，应该保存到设备外部存储的目录中（</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'>SD</span><span
style=';color:#333333'>卡）去，以节省系统空间，并使用户离开设备时也能访问这些文件。设备上有很多可用于存储媒体文件的目录，但作为开发人员只应考虑两个标准的位置：</span></p>
<p class=MsoNormal align=left style='margin-left:42.1pt;text-align:left;
text-indent:-21.1pt'><span style='font-size:10.0pt;font-family:Symbol;
color:#333333'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/os/Environment.html#getExternalStoragePublicDirectory(java.lang.String)"><span
style='color:#006699'>Environment.getExternalStoragePublicDirectory</span></a></span></b><b><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'>(</span></b><b><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/os/Environment.html#DIRECTORY_PICTURES"><span
style='color:#006699'>Environment.DIRECTORY_PICTURES</span></a></span></b><b><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'>)</span></b><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif"'>―― </span><span
>本方法返回标准的、共享的、系统建议的存放位置，用于存放图片和视频文件。本目录是共享的（</span><span
lang=EN-US style='font-family:"Calibri","sans-serif"'>public</span><span
>），因此其它应用程序可以很容易地查找、读取、修改、删除存于此处的文件。即使应用程序被用户卸载，存于此处的媒体文件也不会被删除。为了避免与已有的图片和视频相冲突，应该在此目录下为自己的媒体文件创建一个子目录，如下代码所示。本方法自</span><span
lang=EN-US style='font-family:"Calibri","sans-serif"'>Android 2.2 (API Level 8)
</span><span >起启用，更早</span><span
style='font-family:"Calibri","sans-serif"'>API</span><span style='font-family:
宋体'>版本的也有类似的调用，请参阅</span><span style='font-family:"Calibri","sans-serif";
color:#333333'><a target="_blank" href="http://developer.android.com/guide/topics/data/data-storage.html#SavingSharedFiles"><span
lang=EN-US style=';color:#006699'><span>保存共享文件</span></span></a></span><span
style=';color:#333333'>。</span></p>
<p class=MsoNormal align=left style='margin-left:42.1pt;text-align:left;
text-indent:-21.1pt'><span style='font-size:10.0pt;font-family:Symbol;
color:#333333'>・<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><b><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/content/Context.html#getExternalFilesDir(java.lang.String)"><span
style='color:#006699'>Context.getExternalFilesDir</span></a></span></b><b><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'>(</span></b><b><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/os/Environment.html#DIRECTORY_PICTURES"><span
style='color:#006699'>Environment.DIRECTORY_PICTURES</span></a></span></b><b><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'>)</span></b><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'> ―― </span><span
style=';color:#333333'>本方法返回一个标准的、用于存放图片和视频的位置，该存放位置与应用程序相关联。如果应用程序被卸载，则存于此处的文件将会被删除。对存于此处的文件不会增加访问权限控制，其它应用程序也可以读取、修改、删除文件。</span></p>
<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>以下例程演示了如何为媒体文件创建一个</span><span
style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/java/io/File.html"><span
style='color:#006699'>File</span></a></span><span style=';
color:#333333'>或</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/net/Uri.html"><span
style='color:#006699'>Uri</span></a></span><span >存放位置，通过</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/content/Intent.html"><span
style='color:#006699'>Intent</span></a></span><span >调用摄像头时可以使用该文件，</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'><a
href="1.htm#build_app"><span style=';color:#006699'><span>创建摄像应用</span></span></a></span><span >时也可以使用它。</span></p>

<div style='border:solid #CCCCCC 1.0pt;padding:8.0pt 8.0pt 8.0pt 8.0pt;
background:#FAFAFA;margin-left:21.0pt;margin-right:0cm'>

<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>public</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>static</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>final</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>int</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>
MEDIA_TYPE_IMAGE </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>=</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#006666'>1</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>;</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>public</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>static</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>final</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>int</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>
MEDIA_TYPE_VIDEO </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>=</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#006666'>2</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>;</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#880000'>/** </span><span
style=';color:#880000'>为保存图片或视频创建文件</span><span
style='font-family:"Calibri","sans-serif";color:#880000'>Uri */</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>private</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>static</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#660066'>Uri</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>
getOutputMediaFileUri</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:#000088'>int</span><span style='font-family:"Calibri","sans-serif";
color:black'> type</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>){</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>return</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#660066'>Uri</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>fromFile</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:black'>getOutputMediaFile</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:black'>type</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>));</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>}</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#880000'>/** </span><span
style=';color:#880000'>为保存图片或视频创建</span><span
style='font-family:"Calibri","sans-serif";color:#880000'>File */</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>private</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>static</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#660066'>Uri</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>
getOutputMediaFile</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:#000088'>int</span><span style='font-family:"Calibri","sans-serif";
color:black'> type</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>){</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#880000'>//
</span><span style=';color:#880000'>安全起见，在使用前应该</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#880000'>//
</span><span style=';color:#880000'>用</span><span
style='font-family:"Calibri","sans-serif";color:#880000'>Environment.getExternalStorageState()</span><span
style=';color:#880000'>检查</span><span
style='font-family:"Calibri","sans-serif";color:#880000'>SD</span><span
style=';color:#880000'>卡是否已装入</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#660066'>File</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>
mediaStorageDir </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>=</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>new</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#660066'>File</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:#660066'>Environment</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>getExternalStoragePublicDirectory</span><span
style='font-family:"Calibri","sans-serif";color:#666600'>(</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span><span style='font-family:
"Calibri","sans-serif";color:#660066'>Environment</span><span
style='font-family:"Calibri","sans-serif";color:#666600'>.</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>DIRECTORY_PICTURES</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>),</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#008800'>&quot;MyCameraApp&quot;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>);</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:22.5pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:#880000'>// </span><span style=';color:#880000'>如果期望图片在应用程序卸载后还存在、且能被其它应用程序共享，</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
text-indent:22.5pt;layout-grid-mode:char;background:#FAFAFA;border:none;
padding:0cm'><span style='font-family:"Calibri","sans-serif";
color:#880000'>// </span><span style=';color:#880000'>则此保存位置最合适</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#880000'>//
</span><span style=';color:#880000'>如果不存在的话，则创建存储目录</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#000088'>if</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>(!</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> mediaStorageDir</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>.</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>exists</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>()){</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>if</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(!</span><span style='font-family:"Calibri","sans-serif";
color:black'> mediaStorageDir</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>mkdirs</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>()){</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#660066'>Log</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>d</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:#008800'>&quot;MyCameraApp&quot;</span><span style='font-family:
"Calibri","sans-serif";color:#666600'>,</span><span
style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#008800'>&quot;failed
to create directory&quot;</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>);</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>return</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>null</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>;</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>}</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#666600'>}</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#880000'>//
</span><span style=';color:#880000'>创建媒体文件名</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#660066'>String</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> timeStamp </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>=</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>new</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#660066'>SimpleDateFormat</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>(</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#008800'>&quot;yyyyMMdd_HHmmss&quot;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>).</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>format</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>(</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>new</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#660066'>Date</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>());</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#660066'>File</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> mediaFile</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#000088'>if</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>(</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>type </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>==</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>
MEDIA_TYPE_IMAGE</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>){</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; mediaFile </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>=</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>new</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#660066'>File</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:black'>mediaStorageDir</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>getPath</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>()</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>+</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#660066'>File</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>separator </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>+</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#008800'>&quot;IMG_&quot;</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>+</span><span style='font-family:"Calibri","sans-serif";
color:black'> timeStamp </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>+</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#008800'>&quot;.jpg&quot;</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>);</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#666600'>}</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>else</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>if</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>(</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>type </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>==</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>
MEDIA_TYPE_VIDEO</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>)</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>{</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; mediaFile </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>=</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>new</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#660066'>File</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>(</span><span style='font-family:"Calibri","sans-serif";
color:black'>mediaStorageDir</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>getPath</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>()</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>+</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#660066'>File</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>.</span><span style='font-family:"Calibri","sans-serif";
color:black'>separator </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>+</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#008800'>&quot;VID_&quot;</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>+</span><span style='font-family:"Calibri","sans-serif";
color:black'> timeStamp </span><span style='font-family:"Calibri","sans-serif";
color:#666600'>+</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#008800'>&quot;.mp4&quot;</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>);</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#666600'>}</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#000088'>else</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>{</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
&nbsp; &nbsp; </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>return</span><span style='font-family:"Calibri","sans-serif";
color:black'> </span><span style='font-family:"Calibri","sans-serif";
color:#000088'>null</span><span style='font-family:"Calibri","sans-serif";
color:#666600'>;</span><span style='font-family:"Calibri","sans-serif";
color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#666600'>}</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp; &nbsp;
</span><span style='font-family:"Calibri","sans-serif";color:#000088'>return</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'> mediaFile</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>;</span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:black'>&nbsp;</span></p>
<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
layout-grid-mode:char;background:#FAFAFA;border:none;padding:0cm'><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#666600'>}</span></p>

</div>

<div style='border:none;border-left:solid #99AACC 3.0pt;padding:0cm 0cm 0cm 6.0pt;
margin-left:21.0pt;margin-right:0cm'>

<p class=MsoNormal align=left style='margin-left:0cm;text-align:left;
border:none;padding:0cm'><b><span >注意：</span></b><span
style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/os/Environment.html#getExternalStoragePublicDirectory(java.lang.String)"><span
style='color:#006699'>Environment.getExternalStoragePublicDirectory()</span></a></span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
>自</span><span style='font-family:"Calibri","sans-serif"'>Android
2.2 (API Level 8) </span><span >版本启用。如果目标设备使用较早期版本的</span><span
lang=EN-US style='font-family:"Calibri","sans-serif"'>Android</span><span
>，请用</span><span style='font-family:"Calibri","sans-serif";
color:#007000'><a target="_blank" href="http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory()"><span
style='color:#006699'>Environment.getExternalStorageDirectory()</span></a></span><span
lang=EN-US style='font-family:"Calibri","sans-serif";color:#333333'> </span><span
>代替。详情请参阅</span><u><span style='font-family:
"Calibri","sans-serif";color:#006699'><a target="_blank" href="http://developer.android.com/guide/topics/data/data-storage.html#SavingSharedFiles"><span
lang=EN-US style=';color:#006699'><span>保存共享文件</span></span></a></span></u><span
style=';color:#333333'>。</span></p>

</div>

<p class=MsoNormal align=left style='text-align:left;text-indent:21.0pt'><span
>关于在</span><span style='font-family:"Calibri","sans-serif"'>Android</span><span
>设备上保存文件的详细信息，请参阅</span><span
style='font-family:"Calibri","sans-serif";color:#333333'><a target="_blank" href="http://developer.android.com/guide/topics/data/data-storage.html"><span
lang=EN-US style=';color:#006699'><span>数据存储</span></span></a></span><span
style=';color:#333333'>。</span></p>

</div>


</body>

</html>
